(function(e){function t(t){for(var s,n,o=t[0],d=t[1],l=t[2],c=0,m=[];c<o.length;c++)n=o[c],r[n]&&m.push(r[n][0]),r[n]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(e[s]=d[s]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,n=1;n<a.length;n++){var d=a[n];0!==r[d]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},i=[];function n(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"5bb5ab33"}[e]+".js"}function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise(function(t,s){a=r[e]=[t,s]});t.push(a[2]=s);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,o.nc&&d.setAttribute("nonce",o.nc),d.src=n(e),i=function(t){d.onerror=d.onload=null,clearTimeout(l);var a=r[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,n=new Error("Loading chunk "+e+" failed.\n("+s+": "+i+")");n.type=s,n.request=i,a[1](n)}r[e]=void 0}};var l=setTimeout(function(){i({type:"timeout",target:d})},12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(t)},o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],l=d.push.bind(d);d.push=t,d=d.slice();for(var c=0;c<d.length;c++)t(d[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("1356"),r=a.n(s);r.a},"04cd":function(e,t,a){},"0780":function(e,t,a){"use strict";var s=a("da94"),r=a.n(s);r.a},"0edf":function(e,t,a){},"0fb5":function(e,t,a){},1356:function(e,t,a){},"1d88":function(e,t,a){"use strict";var s=a("c339"),r=a.n(s);r.a},"1df8":function(e,t,a){},3072:function(e,t,a){"use strict";var s=a("aca8"),r=a.n(s);r.a},"31aa":function(e,t,a){"use strict";var s=a("1df8"),r=a.n(s);r.a},3502:function(e,t,a){"use strict";var s=a("04cd"),r=a.n(s);r.a},"356c":function(e,t,a){},"3cee":function(e,t,a){"use strict";var s=a("55ef"),r=a.n(s);r.a},4600:function(e,t,a){},"48e4":function(e,t,a){"use strict";var s=a("824f"),r=a.n(s);r.a},"4b7b":function(e,t,a){"use strict";var s=a("356c"),r=a.n(s);r.a},5145:function(e,t,a){"use strict";var s=a("731b"),r=a.n(s);r.a},5304:function(e,t,a){"use strict";var s=a("0edf"),r=a.n(s);r.a},"55ef":function(e,t,a){},5636:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-layout",{staticStyle:{position:"relative"},attrs:{row:"",fluid:"",wrap:"","fill-height":"","justify-center":e.$vuetify.breakpoint.mdAndDown,"align-end":e.$vuetify.breakpoint.mdAndDown}},[a("v-layout",{staticStyle:{position:"absolute",top:"0px left: 0px",width:"100%",height:"100%",background:'url("/bg.jpg")',"background-repeat":"repeat","background-position":"center","background-size":"cover","z-index":"-1"}}),a("v-flex",{staticClass:"navRouter",attrs:{xs12:"",lg2:"",shrink:""}},[a("router")],1),a("v-flex",{staticStyle:{"min-height":"100vh"},attrs:{"pa-5":"","ml-5":e.$vuetify.breakpoint.mdAndUp,xs11:"",lg9:"",shsrink:e.$vuetify.breakpoint.smAndDown}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1),a("v-flex",{attrs:{lg1:"",shrink:""}})],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:"",fluid:"",column:""}},[a("v-flex",{staticClass:"hidden-lg-and-up",attrs:{xs12:""}},[a("v-toolbar",{},[a("v-spacer"),a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}})],1)],1),a("v-flex",[a("v-navigation-drawer",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"px-5 navbar ",staticStyle:{position:"fixed",top:"0px",left:"0px","max-height":"100vh"},attrs:{fixed:"",temporary:!!e.$vuetify.breakpoint.mdAndDown,"mobile-break-point":"md-and-down",absolute:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-layout",{style:e.dynamicHeight,attrs:{wrap:"",row:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{"align-self-start":"",shrink:""}},[a("v-layout",{attrs:{wrap:"",row:"","justify-center":""}},[a("v-img",{attrs:{src:"/logo.png",contain:"","aspect-ratio":"3","min-width":"240"}}),1==e.isLoggedIn()?a("v-flex",{attrs:{xs6:"","pl-3":""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Hello "+e._s(e.$root.$data.$name)+" ")]),a("v-btn",{attrs:{small:"",rounded:""},on:{click:e.logout}},[e._v(" Log Out ")])],1):a("v-flex",{attrs:{xs6:"","pl-3":""}},[a("v-btn",{attrs:{small:"",rounded:""},on:{click:function(t){return e.$router.push("/")}}},[e._v(" Log in ")])],1)],1)],1),a("v-flex",{staticClass:"content",style:e.dynamicStyle,attrs:{"pa-1":"","align-self-start":""}},[a("v-list",{attrs:{rounded:"",dense:""}},[e._l(e.items,function(t,s){return[t.group?a("v-list-group",{key:s,attrs:{"prepend-icon":t.icon,"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-subtitle",[e._v(e._s(t.name))])]},proxy:!0}],null,!0)},e._l(t.group,function(t,s){return a("v-list-item",{key:s,attrs:{to:t.route,link:""}},[a("v-list-item-icon",[a("v-icon",[e._v(" "+e._s(t.icon))])],1),a("v-list-item-content",[a("v-list-item-subtitle",[e._v(e._s(t.name))])],1)],1)}),1):[a("v-list-item",{attrs:{to:t.route}},[a("v-list-item-icon",[a("v-icon",[e._v(" "+e._s(t.icon))])],1),a("v-list-item-subtitle",[e._v(" "+e._s(t.name)+" ")])],1)]]})],2)],1)],1)],1)],1)],1)},o=[],d={data(){return{mini:!0,drawer:!0,items:[{name:"Dashboard",icon:"account_circle",group:[{name:"Product Wise",icon:"list",route:"/productWise"},{name:"Project Wise",icon:"list",route:"/projectWiseDash"},{name:"Users",icon:"account_circle",route:"/users"}]},{name:"Clients",icon:"account_circle",group:[{name:"Clients List",icon:"account_circle",route:"/clients"},{name:"Projects",route:"/projects",icon:"assignment_ind"},{name:"Persons",route:"/persons",icon:"account_circle"},{name:"Job Card",route:"/jobcards",icon:"assignment"}]},{name:"Products",icon:"layers",group:[{name:"List",route:"/products",icon:"list"},{name:"Inventory",route:"/inventory",icon:"storage"},{name:"Vendor",route:"/vendors",icon:"people"}]},{name:"Purchase Order",route:"/purchase-orders",icon:"library_books"},{name:"Stock Transfer",route:"/stock-transfer",icon:"swap_horiz"}]}},computed:{dynamicStyle(){return this.$root.$data.$loggedIn?{filter:"",pointerEvents:"auto",transform:"scale(1)"}:{filter:"blur(6px)",pointerEvents:"none",transform:"scale(.9)"}},dynamicHeight(){return this.$vuetify.breakpoint.mdAndUp?{height:"100%"}:{}}},methods:{onResize(){this.$vuetify.breakpoint.lgAndUp&&(this.drawer=!0)},isLoggedIn(){return this.$root.$data.$loggedIn},logout(){axios({baseURL:this.$config.baseUrl,url:"/logout",method:"GET"}).then(e=>{e&&(this.$router.push("/"),this.$root.$data.$loggedIn=!1)})}}},l=d,c=(a("3cee"),a("2877")),u=a("6544"),m=a.n(u),v=a("5bc1"),h=a("8336"),p=a("0e8f"),f=a("132d"),x=a("adda"),g=a("a722"),b=a("8860"),y=a("56b0"),k=a("da13"),E=a("5d23"),S=a("34c3"),T=a("f774"),C=a("2fa4"),I=a("71d9"),w=a("269a"),j=a.n(w),$=a("dc22"),P=Object(c["a"])(l,n,o,!1,null,null,null),D=P.exports;m()(P,{VAppBarNavIcon:v["a"],VBtn:h["a"],VFlex:p["a"],VIcon:f["a"],VImg:x["a"],VLayout:g["a"],VList:b["a"],VListGroup:y["a"],VListItem:k["a"],VListItemContent:E["a"],VListItemIcon:S["a"],VListItemSubtitle:E["b"],VNavigationDrawer:T["a"],VSpacer:C["a"],VToolbar:I["a"]}),j()(P,{Resize:$["a"]});var V={name:"App",components:{router:D},data:()=>({}),async mounted(){if(!this.$root.$data.$loggedIn){let e=await axios.get(this.$config.baseUrl+"isLoggedIn");200==e.status&&(this.$root.$data.$loggedIn=!0,this.$root.$data.$name=e.data.name,"/"==this.$route.path&&this.$router.push("/clients").catch(e=>console.log("err -> "+e)))}}},O=V,A=(a("034f"),a("7496")),q=Object(c["a"])(O,r,i,!1,null,null,null),N=q.exports;m()(q,{VApp:A["a"],VFlex:p["a"],VLayout:g["a"]});var L=a("8c4f"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("HelloWorld")},H=[],U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-layout",{attrs:{"text-center":"",wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-img",{staticClass:"my-3",attrs:{src:a("9b19"),contain:"",height:"200"}})],1),s("v-flex",{attrs:{"mb-4":""}},[s("h1",{staticClass:"display-2 font-weight-bold mb-3"},[e._v("\n        Welcome to Vuetify\n      ")]),s("p",{staticClass:"subheading font-weight-regular"},[e._v("\n        For help and collaboration with other Vuetify developers,\n        "),s("br"),e._v("please join our online\n        "),s("a",{attrs:{href:"https://community.vuetifyjs.com",target:"_blank"}},[e._v("Discord Community")])])]),s("v-flex",{attrs:{"mb-5":"",xs12:""}},[s("h2",{staticClass:"headline font-weight-bold mb-3"},[e._v("What's next?")]),s("v-layout",{attrs:{"justify-center":""}},e._l(e.whatsNext,function(t,a){return s("a",{key:a,staticClass:"subheading mx-3",attrs:{href:t.href,target:"_blank"}},[e._v("\n          "+e._s(t.text)+"\n        ")])}),0)],1),s("v-flex",{attrs:{xs12:"","mb-5":""}},[s("h2",{staticClass:"headline font-weight-bold mb-3"},[e._v("Important Links")]),s("v-layout",{attrs:{"justify-center":""}},e._l(e.importantLinks,function(t,a){return s("a",{key:a,staticClass:"subheading mx-3",attrs:{href:t.href,target:"_blank"}},[e._v("\n          "+e._s(t.text)+"\n        ")])}),0)],1),s("v-flex",{attrs:{xs12:"","mb-5":""}},[s("h2",{staticClass:"headline font-weight-bold mb-3"},[e._v("Ecosystem")]),s("v-layout",{attrs:{"justify-center":""}},e._l(e.ecosystem,function(t,a){return s("a",{key:a,staticClass:"subheading mx-3",attrs:{href:t.href,target:"_blank"}},[e._v("\n          "+e._s(t.text)+"\n        ")])}),0)],1)],1)],1)},B=[],R={data:()=>({ecosystem:[{text:"vuetify-loader",href:"https://github.com/vuetifyjs/vuetify-loader"},{text:"github",href:"https://github.com/vuetifyjs/vuetify"},{text:"awesome-vuetify",href:"https://github.com/vuetifyjs/awesome-vuetify"}],importantLinks:[{text:"Documentation",href:"https://vuetifyjs.com"},{text:"Chat",href:"https://community.vuetifyjs.com"},{text:"Made with Vuetify",href:"https://madewithvuejs.com/vuetify"},{text:"Twitter",href:"https://twitter.com/vuetifyjs"},{text:"Articles",href:"https://medium.com/vuetify"}],whatsNext:[{text:"Explore components",href:"https://vuetifyjs.com/components/api-explorer"},{text:"Select a layout",href:"https://vuetifyjs.com/layout/pre-defined"},{text:"Frequently Asked Questions",href:"https://vuetifyjs.com/getting-started/frequently-asked-questions"}]})},W=R,F=a("a523"),G=Object(c["a"])(W,U,B,!1,null,null,null),z=G.exports;m()(G,{VContainer:F["a"],VFlex:p["a"],VImg:x["a"],VLayout:g["a"]});var J={components:{HelloWorld:z}},Y=J,Q=Object(c["a"])(Y,M,H,!1,null,null,null),K=Q.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":"",wrap:""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"Address","data-vv-name":"address","error-messages":e.errors.collect("address")},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min:3|max:64",expression:"'min:3|max:64'"}],attrs:{label:"Gst No","data-vv-name":"gst_name","error-messages":e.errors.collect("gst_name")},model:{value:e.editedItem.gst_no,callback:function(t){e.$set(e.editedItem,"gst_no",t)},expression:"editedItem.gst_no"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"State","data-vv-name":"state","error-messages":e.errors.collect("state")},model:{value:e.editedItem.state,callback:function(t){e.$set(e.editedItem,"state",t)},expression:"editedItem.state"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.enums.project_type,label:"Project Type","data-vv-name":"type","error-messages":e.errors.collect("type")},model:{value:e.editedItem.project_type,callback:function(t){e.$set(e.editedItem,"project_type",t)},expression:"editedItem.project_type"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.client_id",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("client")(a.client_id))+"\n                            ")]}},{key:"item.name",fn:function(t){return[a("router-link",{staticClass:"clickable",staticStyle:{cursor:"pointer"},attrs:{tag:"tr",to:t.item["client_id"]+"",append:""}},[a("td",[e._v(" "+e._s(t.item.name))])])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},X=[],ee={methods:{firstCharUpperCase(e){return e.charAt(0).toUpperCase()+e.slice(1)}}},te={props:{baseUrl:{type:String,default:"http://34.83.223.211/api/v1/"},endpoint:{type:String,required:!1}},data(){return{api:axios.create({baseURL:this.baseUrl,withCredentials:!0}),data:null,error:null,loading:!1}},methods:{async query(e,...t){if(!this.loading){this.loading=!0;try{const s=await this.api[e](...t);this.data=s.data,this.error=null,this.$emit("success",s)}catch(a){this.data=null,this.error=a.response,this.$emit("error",a)}this.loading=!1}}}},ae={mixins:[te],props:{entity:{type:Object},filter:{type:Object}},watch:{filter:{immediate:!0,handler:"load"}},data(){return{data:this.entity||null}},methods:{load(){return this.query("get",this.endpoint,{params:{...this.data,...this.filter}})},generateItems(e,t){let a=[];return e.forEach((e,t)=>{a.push({text:e.name,value:e.key})}),a},validate(){this.$validator.validateAll()}},render(){return this.$scopedSlots.default({data:this.data,error:this.error,load:this.load,loading:this.loading,generateItems:this.generateItems,validate:this.validate})}},se={mixins:[te],props:{entity:{type:Object},id:{type:[Number,String]}},data(){return{data:this.entity||null}},created(){this.id&&!this.data&&this.find()},methods:{create(e){return this.query("post",this.endpoint,e)},remove(e){return this.query("delete",`${this.endpoint}`,{data:e})},find(){return this.query("get",`${this.endpoint}`)},update(e){return this.query("patch",`${this.endpoint}`,e)},approve(e){return this.query("patch",`${this.endpoint}/accept/${e}`)},dynamic(e,t,a){return this.query(t,`${this.endpoint}/${e}`,a)}},render(){return this.$scopedSlots.default({create:this.create,data:this.data,remove:this.remove,loading:this.loading,update:this.update,error:this.error,approve:this.approve,dynamic:this.dynamic})}};const re={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(re);var ie={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"clients",search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"ID",value:"client_id"},{text:"Name",value:"name"},{text:"State",value:"state"},{text:"Address",value:"address"},{text:"Project Type",value:"project_type"},{text:"Actions",value:"actions"}],enums:{project_type:[{text:"Commercial",value:"commercial"},{text:"Residential",value:"residential"},{text:"Industrial",value:"industrial"},{text:"Residential Cum Commercial",value:"residential-cum-commercial"},{text:"Special",value:"special"}]},editedIndex:-1,editedItem:{name:"",state:"",address:"",gst_no:"",project_type:""},defaultItem:{name:"",state:"",address:"",gst_no:"",project_type:""},snackbar:{visible:!1,state:!1,message:""},methodsEnums:re,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{t&&e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{t&&e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({client_id:this.editedItem.client_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},ne=ie,oe=(a("1d88"),a("b0af")),de=a("99d9"),le=a("8fea"),ce=a("169a"),ue=a("b974"),me=a("2db4"),ve=a("8654"),he=Object(c["a"])(ne,Z,X,!1,null,null,null),pe=he.exports;m()(he,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSelect:ue["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"]});var fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"50%"},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{rows:"","justify-end":"","pr-5":""}},[a("v-flex",{attrs:{"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{lg6:"",shrink:""}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("data-list",{attrs:{endpoint:"clients"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return a("div",{},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{label:"Clients",error:r,"error-messages":r?r.statusText+". Try Reloading the page":"",loading:!r&&i?i:"",items:i||r?[]:e.generateItems(s.results),"data-vv-name":"client_names"},model:{value:e.editedItem.client_id,callback:function(t){e.$set(e.editedItem,"client_id",t)},expression:"editedItem.client_id"}})],1)}}],null,!1,341729477)})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:128",expression:"'required|min:6|max:128'"}],attrs:{label:"Godown Address","data-vv-name":"address","error-messages":e.errors.collect("address")},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},xe=[];const ge={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(ge);var be={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"godowns",search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,schema:{godown_id:{text:"Godown ID","v-validate":"'integer'",value:"godown_id",edit_value:"'integer'",default:0,ignore:!0},name:{text:"Godown Name","v-validate":"'required|min:3|max:64'",value:"name",edit_value:"'min:3|max:64'",default:0},site_address:{text:"Godown Address","v-validate":"'required|min:3|max:128'",value:"address",edit_value:"'min:3|max:128'",default:0},client_name:{text:"Client Name",type:"select","v-validate":"'required'",value:"client_name",default:0}},items:[],options:{},headers:[],editedIndex:-1,editedItem:{godown_id:0,name:"",address:"",client_name:"",client_id:null},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0},snackbar:{visible:!1,state:!1,message:""},methodsEnums:ge,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){this.headers=this.generateHeaders(this.schema)},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e){let t=[];return t.push({text:"none",value:null}),e.forEach((e,a)=>{t.push({text:e.name,value:e.client_id})}),t},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.client_id=String(e.client_id),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({godown_id:this.editedItem.godown_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},_e=be,ye=(a("653e"),a("a844")),ke=Object(c["a"])(_e,fe,xe,!1,null,null,null),Ee=ke.exports;m()(ke,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSelect:ue["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"],VTextarea:ye["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"50%"},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{rows:"","justify-end":"","pr-5":""}},[a("v-flex",{attrs:{"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{lg6:"",shrink:""}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[e.userMethod==e.methodsEnums.POST?[a("form-jobcard",{ref:"form_child",attrs:{form:e.currentItem,isEdit:e.userMethod==e.methodsEnums.PATCH},on:{"update:form":function(t){e.currentItem=t},init:function(t){e.child_loaded=!0}}})]:e.userMethod==e.methodsEnums.PATCH?[a("edit-form",{ref:"edit_form",attrs:{form:e.currentItem,isEdit:e.userMethod==e.methodsEnums.PATCH},on:{"update:form":function(t){e.currentItem=t},init:function(t){e.child_loaded=!0}}})]:e._e()],2):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.jobcard_id",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("jobcard")(a.jobcard_id))+"\n                            ")]}},{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}}],null,!0)})],1)}}])})],1)],1)},Te=[],Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",e._b({attrs:{wrap:""}},"v-layout",e.$attrs,!1),[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Clients",loading:!(e.extras.clients.error||!e.extras.clients.loading)&&e.extras.clients.loading,items:e.extras.clients.loading||e.extras.clients.error?[]:e.extras.clients.data,"data-vv-name":"client_names","error-messages":e.errors.collect("client_names")},model:{value:e.form.client_id,callback:function(t){e.$set(e.form,"client_id",t)},expression:"form.client_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Projects",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.extras.projects.data,"data-vv-name":"project_names","error-messages":e.errors.collect("project_names")},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Persons",loading:!(e.extras.persons.error||!e.extras.persons.loading)&&e.extras.persons.loading,items:e.extras.persons.loading||e.extras.persons.error?[]:e.extras.persons.data,"data-vv-name":"person_names","error-messages":e.errors.collect("person_names")},model:{value:e.form.person_id,callback:function(t){e.$set(e.form,"person_id",t)},expression:"form.person_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"Location","data-vv-name":"location","error-messages":e.errors.collect("location")},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"numeric|required|min:1",expression:"'numeric|required|min:1'"}],attrs:{label:"Revision","data-vv-name":"revision","error-messages":e.errors.collect("revision")},model:{value:e.form.revision,callback:function(t){e.$set(e.form,"revision",t)},expression:"form.revision"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Site Supervisor","data-vv-name":"site_supervisor","error-messages":e.errors.collect("site_supervisor")},model:{value:e.form.site_supervisor,callback:function(t){e.$set(e.form,"site_supervisor",t)},expression:"form.site_supervisor"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Autocad Engineer","data-vv-name":"autocad_engineer","error-messages":e.errors.collect("autocad_engineer")},model:{value:e.form.autocad_engineer,callback:function(t){e.$set(e.form,"autocad_engineer",t)},expression:"form.autocad_engineer"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Plan Approved By","data-vv-name":"plan_approved_by","error-messages":e.errors.collect("plan_approved_by")},model:{value:e.form.plan_approved_by,callback:function(t){e.$set(e.form,"plan_approved_by",t)},expression:"form.plan_approved_by"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Labour Contractor","data-vv-name":"labour_contractor","error-messages":e.errors.collect("labour_contractor")},model:{value:e.form.labour_contractor,callback:function(t){e.$set(e.form,"labour_contractor",t)},expression:"form.labour_contractor"}})],1),a("v-btn",{on:{click:e.newHeading}},[e._v(" Add Product ")]),e.form.products_headings.length>0?a("v-flex",{attrs:{xs12:""}},e._l(e.form.products_headings,function(t,s){return a("v-layout",{staticStyle:{"border-radius":"15px"},attrs:{"my-5":"","pa-5":""}},[a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Heading","data-vv-name":"heading_"+s,"error-messages":e.errors.collect("heading_"+s)},model:{value:e.form.products_headings[s].heading,callback:function(t){e.$set(e.form.products_headings[s],"heading",t)},expression:"form.products_headings[index].heading"}})],1),a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Sub-heading","data-vv-name":"subheading"+s,"error-messages":e.errors.collect("subheading"+s)},model:{value:e.form.products_headings[s].subheading,callback:function(t){e.$set(e.form.products_headings[s],"subheading",t)},expression:"form.products_headings[index].subheading"}})],1),e._l(t.pItems,function(t,r){return[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Product",loading:!e.extras.products_headings[s][r].loading&&!e.extras.products_headings[s][r].loading&&!e.extras.products_headings[s][r].loading,items:e.extras.products_headings[s][r].loading&&e.extras.products_headings[s][r].error?!e.extras.products_headings[s][r].data:[],"data-vv-name":"product_"+s+"_"+r,"error-messages":"product_"+s+"_"+r},model:{value:e.form.products_headings[s][r].pid,callback:function(t){e.$set(e.form.products_headings[s][r],"pid",t)},expression:"form.products_headings[index][ii].pid"}})]})],2)}),1):e._e()],1)},Ie=[],we={name:"project-form",mixins:[],props:{form:{type:Object,required:!0},isEdit:{type:Boolean}},components:{DataList:ae},data(){return{ready:!1,default:{client_id:0,project_id:0,person_id:0,location:"",revision:0,date:null,site_supervisor:"",autocad_engineer:"",plan_approved_by:"",labour_contractor:"",person_id:0,products_headings:[]},extras:{clients:{data:[],loading:!0,error:!1,loaded:!1},projects:{data:[],loading:!0,error:!1,loaded:!1},persons:{data:[],loading:!0,error:!1,loaded:!1},products_headings:{}},baseUrl:"http://34.83.223.211/api/v1/"}},watch:{"form.client_id":{deep:!0,handler:function(e,t){e&&this.ready&&(this.form.project_id=null,this.form.person_id=null,axios.get(this.baseUrl+"projects",{params:{client_id:this.form.client_id}}).then(e=>{this.extras["projects"].data=this.generateItems(e.data.results,"project_id"),this.extras["projects"].loading=!1,this.extras["projects"].error=!1}).catch(e=>{this.extras["projects"].error=!0,this.extras["projects"].loading=!1,this.extras["projects"].data=[]}))}},"form.project_id":function(e,t){e&&this.ready&&(this.form.person_id=null,axios.get(this.baseUrl+"persons",{params:{project_id:this.form.project_id}}).then(e=>{this.extras["persons"].data=this.generateItems(e.data.results,"person_id"),this.extras["persons"].loading=!1,this.extras["persons"].error=!1}).catch(e=>{this.extras["persons"].error=!0,this.extras["persons"].loading=!1,this.extras["persons"].data=[]}))}},created(){this.form.products_headings.forEach((e,t,a)=>{t.pItems.forEach((e,a,s)=>{this.extras["product_headings"][t][a].loading=!0,this.extras["product_headings"][t][a].error=!1,this.extras["product_headings"][t][a].data=[]})}),this.isEdit||(this.ready=!0)},async mounted(){this.$emit("init"),axios.get(this.baseUrl+"clients",{params:{}}).then(e=>{this.extras["clients"].data=this.generateItems(e.data.results,"client_id"),this.extras["clients"].loading=!1,this.extras["clients"].error=!1}).catch(e=>{this.extras["clients"].error=!0,this.extras["clients"].loading=!1,this.extras["clients"].data=[]}),this.isEdit&&axios.get(this.baseUrl+"projects",{params:{}}).then(e=>{e&&(this.extras["projects"].data=this.generateItems(e.data.results,"project_id"),this.extras["projects"].loading=falseto,this.extras["projects"].error=!1,axios.get(this.baseUrl+"persons",{params:{}}).then(e=>{e&&(this.extras["persons"].data=this.generateItems(e.data.results,"person_id"),this.extras["persons"].loading=!1,this.extras["persons"].error=!1,this.$nextTick(()=>{alert("ticked"),this.ready=!0}))}).catch(e=>{this.extras["persons"].error=!0,this.extras["persons"].loading=!1,this.extras["persons"].data=[]}))}).catch(e=>{this.extras["projects"].error=!0,this.extras["projects"].loading=!1,this.extras["projects"].data=[]})},methods:{newHeading(){alert("yo")},formSubmit(){this.$validator.validateAll().then(e=>{})},validate(){return new Promise((e,t)=>{this.$validator.validateAll().then(t=>{e(this.form)}).catch(e=>{t(e)})})},cloneData(e,t,a){this.extras[t].data=this.generateItems(e.data.results,a),this.extras[t].loading=!0},cloneError(e){this.extras.clients.error=!0,this.extras.clients.loading=!1},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a}}},je=we,$e=a("c6a6"),Pe=Object(c["a"])(je,Ce,Ie,!1,null,null,null),De=Pe.exports;m()(Pe,{VAutocomplete:$e["a"],VBtn:h["a"],VFlex:p["a"],VLayout:g["a"],VTextField:ve["a"]});var Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",e._b({attrs:{wrap:""}},"v-layout",e.$attrs,!1),[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Clients",loading:!(e.extras.clients.error||!e.extras.clients.loading)&&e.extras.clients.loading,items:e.extras.clients.loading||e.extras.clients.error?[]:e.extras.clients.data,"data-vv-name":"client_names","error-messages":e.errors.collect("client_names")},model:{value:e.form.client_id,callback:function(t){e.$set(e.form,"client_id",t)},expression:"form.client_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Projects",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.extras.projects.data,"data-vv-name":"project_names","error-messages":e.errors.collect("project_names")},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Persons",loading:!(e.extras.persons.error||!e.extras.persons.loading)&&e.extras.persons.loading,items:e.extras.persons.loading||e.extras.persons.error?[]:e.extras.persons.data,"data-vv-name":"person_names","error-messages":e.errors.collect("person_names")},model:{value:e.form.person_id,callback:function(t){e.$set(e.form,"person_id",t)},expression:"form.person_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"Location","data-vv-name":"location","error-messages":e.errors.collect("location")},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"numeric|required|min:1",expression:"'numeric|required|min:1'"}],attrs:{label:"Revision","data-vv-name":"revision","error-messages":e.errors.collect("revision")},model:{value:e.form.revision,callback:function(t){e.$set(e.form,"revision",t)},expression:"form.revision"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Site Supervisor","data-vv-name":"site_supervisor","error-messages":e.errors.collect("site_supervisor")},model:{value:e.form.site_supervisor,callback:function(t){e.$set(e.form,"site_supervisor",t)},expression:"form.site_supervisor"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Autocad Engineer","data-vv-name":"autocad_engineer","error-messages":e.errors.collect("autocad_engineer")},model:{value:e.form.autocad_engineer,callback:function(t){e.$set(e.form,"autocad_engineer",t)},expression:"form.autocad_engineer"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Plan Approved By","data-vv-name":"plan_approved_by","error-messages":e.errors.collect("plan_approved_by")},model:{value:e.form.plan_approved_by,callback:function(t){e.$set(e.form,"plan_approved_by",t)},expression:"form.plan_approved_by"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Labour Contractor","data-vv-name":"labour_contractor","error-messages":e.errors.collect("labour_contractor")},model:{value:e.form.labour_contractor,callback:function(t){e.$set(e.form,"labour_contractor",t)},expression:"form.labour_contractor"}})],1),a("v-btn",{on:{click:e.newHeading}},[e._v(" Add Product ")]),e.form.products_headings.length>0?a("v-flex",{attrs:{xs12:""}},e._l(e.form.products_headings,function(t,s){return a("v-layout",{staticStyle:{"border-radius":"15px"},attrs:{"my-5":"","pa-5":""}},[a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Heading","data-vv-name":"heading_"+s,"error-messages":e.errors.collect("heading_"+s)},model:{value:e.form.products_headings[s].heading,callback:function(t){e.$set(e.form.products_headings[s],"heading",t)},expression:"form.products_headings[index].heading"}})],1),a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Sub-heading","data-vv-name":"subheading"+s,"error-messages":e.errors.collect("subheading"+s)},model:{value:e.form.products_headings[s].subheading,callback:function(t){e.$set(e.form.products_headings[s],"subheading",t)},expression:"form.products_headings[index].subheading"}})],1),e._l(t.pItems,function(t,r){return[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Product",loading:!e.extras.products.loading&&!e.extras.products[s][r].loading&&!e.extras.products[s][r].loading,items:e.extras.products[s][r].loading&&e.extras.products[s][r].error?!e.extras.products[s][r].data:[],"data-vv-name":"product_"+s+"_"+r,"error-messages":"product_"+s+"_"+r},model:{value:e.form.products_headings[s][r].pid,callback:function(t){e.$set(e.form.products_headings[s][r],"pid",t)},expression:"form.products_headings[index][ii].pid"}})]})],2)}),1):e._e()],1)},Oe=[],Ae={name:"project-form",mixins:[],props:{form:{type:Object,required:!0},isEdit:{type:Boolean}},components:{DataList:ae},data(){return{ready:!1,default:{client_id:0,project_id:0,person_id:0,location:"",revision:1,date:null,site_supervisor:"",autocad_engineer:"",plan_approved_by:"",labour_contractor:"",person_id:0,products_headings:[]},extras:{clients:{data:[],loading:!0,error:!1,loaded:!1},projects:{data:[],loading:!0,error:!1,loaded:!1},persons:{data:[],loading:!0,error:!1,loaded:!1},products_headings:{}},baseUrl:"http://34.83.223.211/api/v1/"}},watch:{"form.client_id":{deep:!0,handler:function(e,t){e&&(this.form.project_id=null,this.form.person_id=null,axios.get(this.baseUrl+"projects",{params:{client_id:this.form.client_id}}).then(e=>{this.extras["projects"].data=this.generateItems(e.data.results,"project_id"),this.extras["projects"].loading=!1,this.extras["projects"].error=!1}).catch(e=>{this.extras["projects"].error=!0,this.extras["projects"].loading=!1,this.extras["projects"].data=[]}))}},"form.project_id":function(e,t){e&&(this.form.person_id=null,axios.get(this.baseUrl+"persons",{params:{project_id:this.form.project_id}}).then(e=>{this.extras["persons"].data=this.generateItems(e.data.results,"person_id"),this.extras["persons"].loading=!1,this.extras["persons"].error=!1}).catch(e=>{this.extras["persons"].error=!0,this.extras["persons"].loading=!1,this.extras["persons"].data=[]}))}},created(){this.form.products_headings.forEach((e,t,a)=>{t.pItems.forEach((e,a,s)=>{this.extras["product_headings"][t][a].loading=!0,this.extras["product_headings"][t][a].error=!1,this.extras["product_headings"][t][a].data=[]})})},async mounted(){this.$emit("init"),axios.get(this.baseUrl+"clients",{params:{}}).then(e=>{this.extras["clients"].data=this.generateItems(e.data.results,"client_id"),this.extras["clients"].loading=!1,this.extras["clients"].error=!1}).catch(e=>{this.extras["clients"].error=!0,this.extras["clients"].loading=!1,this.extras["clients"].data=[]}),axios.get(this.baseUrl+"projects",{params:{}}).then(e=>{e&&(this.extras["projects"].data=this.generateItems(e.data.results,"project_id"),this.extras["projects"].loading=falseto,this.extras["projects"].error=!1,axios.get(this.baseUrl+"persons",{params:{}}).then(e=>{e&&(this.extras["persons"].data=this.generateItems(e.data.results,"person_id"),this.extras["persons"].loading=!1,this.extras["persons"].error=!1,this.$nextTick(()=>{alert("ticked")}))}).catch(e=>{this.extras["persons"].error=!0,this.extras["persons"].loading=!1,this.extras["persons"].data=[]}))}).catch(e=>{this.extras["projects"].error=!0,this.extras["projects"].loading=!1,this.extras["projects"].data=[]}),axios.get(this.baseUrl+"clients",{params:{}}).then(e=>{this.extras["products_headings"].data=this.generateItems(e.data.results,"product_id"),this.extras["products_headings"].loading=!1,this.extras["products_headings"].error=!1}).catch(e=>{this.extras["products_headings"].error=!0,this.extras["products_headings"].loading=!1,this.extras["products_headings"].data=[]})},methods:{newHeading(){alert("yo")},formSubmit(){this.$validator.validateAll().then(e=>{})},validate(){return new Promise((e,t)=>{this.$validator.validateAll().then(t=>{e(this.form)}).catch(e=>{t(e)})})},cloneData(e,t,a){this.extras[t].data=this.generateItems(e.data.results,a),this.extras[t].loading=!0},cloneError(e){this.extras.clients.error=!0,this.extras.clients.loading=!1},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a}}},qe=Ae,Ne=Object(c["a"])(qe,Ve,Oe,!1,null,null,null),Le=Ne.exports;m()(Ne,{VAutocomplete:$e["a"],VBtn:h["a"],VFlex:p["a"],VLayout:g["a"],VTextField:ve["a"]});const Me={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(Me);var He={extends:ee,components:{DataList:ae,DataModel:se,formJobcard:De,editForm:Le},data(){return{endpoint:"jobcards",child_loaded:!1,currentItem:{},search:"",dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Jobcard ID",value:"jobcard_id"},{text:"Project Name",value:"project_name"},{text:"Person Name",value:"person_name"},{text:"Tfpc Site Supervisor",value:"site_supervisor"},{text:"Client Name",value:"client_name"},{text:"Actions",value:"actions"}],editedIndex:-1,editedItem:{},defaultItem:{},snackbar:{visible:!1,state:!1,message:""},methodsEnums:Me,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()},child_loaded(){this.currentItem=this.$refs.form_child.form}},async mounted(){},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e){let t=[];return t.push({text:"none",value:null}),e.forEach((e,a)=>{t.push({text:e.name,value:Number(e.client_id)})}),t},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.jobcard_id=String(e.jobcard_id),this.currentItem=Object.assign({},e),this.keyHack(),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$refs.form_child.validate().then(t=>{console.log(t),e.functions.create(t)});break;case this.methodsEnums.PATCH:this.$refs.form_child.validate().then(t=>{t.products_headings=JSON.stringify(t.products_headings),e.functions.update(t)});break;case this.methodsEnums.DELETE:e.functions.remove({jobcard_id:this.editedItem.jobcard_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Ue=He,Be=(a("5145"),Object(c["a"])(Ue,Se,Te,!1,null,"04b51168",null)),Re=Be.exports;m()(Be,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VLayout:g["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"]});var We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("data-list",{attrs:{endpoint:"clients"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return a("div",{},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Clients",error:r,"error-messages":r?r.statusText+". Try Reloading the page":"",loading:!r&&i?i:"",items:i||r?[]:e.generateItems(s.results),"data-vv-name":"client_names"},model:{value:e.editedItem.client_id,callback:function(t){e.$set(e.editedItem,"client_id",t)},expression:"editedItem.client_id"}})],1)}}],null,!1,1961781317)})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:128",expression:"'required|min:6|max:128'"}],attrs:{label:"Site Address","data-vv-name":"site_address","error-messages":e.errors.collect("site_address")},model:{value:e.editedItem.site_address,callback:function(t){e.$set(e.editedItem,"site_address",t)},expression:"editedItem.site_address"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Godown Name","data-vv-name":"godown name","error-messages":e.errors.collect("godown_name")},model:{value:e.editedItem.godown_name,callback:function(t){e.$set(e.editedItem,"godown_name",t)},expression:"editedItem.godown_name"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:"projects"},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:"projects"},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.project_id",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("project")(a.project_id))+"\n                            ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}},{key:"item.dashboard",fn:function(t){var s=t.item;return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"projectWise",params:{id:s.project_id}}}},[a("div",[e._v(" Open ")])])]}}],null,!0)})],1)}}])})],1)],1)},Fe=[];const Ge={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(Ge);var ze={extends:ee,components:{DataList:ae,DataModel:se},data(){return{search:"",dialog:!1,dialog_key:0,dl_key:0,dialog_loading:!1,schema:{project_id:{text:"Project ID","v-validate":"'integer'",value:"project_id",edit_value:"'integer'",default:0,ignore:!0},name:{text:"Project Name","v-validate":"'required|min:3|max:64'",value:"name",edit_value:"'min:3|max:64'",default:0},site_address:{text:"Project Address","v-validate":"'required|min:3|max:128'",value:"site_address",edit_value:"'min:3|max:128'",default:0},client_name:{text:"Client Name",type:"select","v-validate":"'required'",value:"client_name",default:0},dashboard:{text:"Dashboard",type:"select","v-validate":"'required'",value:"dashboard",default:0}},items:[],options:{},headers:[],editedIndex:-1,editedItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0,godown_name:""},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0},snackbar:{visible:!1,state:!1,message:""},methodsEnums:Ge,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){this.headers=this.generateHeaders(this.schema)},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e){let t=[];return e.forEach((e,a)=>{t.push({text:e.name,value:e.client_id})}),t},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(console.log(e.functions),this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({project_id:this.editedItem.project_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Je=ze,Ye=(a("31aa"),Object(c["a"])(Je,We,Fe,!1,null,null,null)),Qe=Ye.exports;m()(Ye,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSelect:ue["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"],VTextarea:ye["a"]});var Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px","text-align":"center"},attrs:{"pa-5":"",row:"","justify-center":""}},[a("v-flex",{attrs:{shrink:""}},[a("data-list",{key:e.dl_key,attrs:{endpoint:"inventory/project",entity:{project_id:e.$route.params.id}},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=(t.error,t.loading);return a("div",{},[a("v-flex",{attrs:{shrink:"","my-4":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(s.result[0].project_name)+" ")])]),a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{loading:r,headers:e.headers,items:s.result,search:e.search},scopedSlots:e._u([{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},Ze=[],Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",e._b({attrs:{wrap:""}},"v-layout",e.$attrs,!1),[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"Subject","data-vv-name":"subject","error-messages":e.errors.collect("subject")},model:{value:e.form.subject,callback:function(t){e.$set(e.form,"subject",t)},expression:"form.subject"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:1|max:64",expression:"'required|min:1|max:64'"}],attrs:{label:"Ref","data-vv-name":"ref","error-messages":e.errors.collect("ref"),hint:"Must Be A Letters","persistent-hint":""},model:{value:e.form.ref,callback:function(t){e.$set(e.form,"ref",t)},expression:"form.ref"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Vendors",loading:!(e.extras.vendors.error||!e.extras.vendors.loading)&&e.extras.vendors.loading,items:e.extras.vendors.loading||e.extras.vendors.error?[]:e.extras.vendors.data,"data-vv-name":"vendor_name","error-messages":e.errors.collect("vendor_name"),type:"search"},model:{value:e.form.vendor_id,callback:function(t){e.$set(e.form,"vendor_id",t)},expression:"form.vendor_id"}})],1),a("v-flex",{attrs:{xs12:"","mb-5":""}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-text-field",e._g({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"event",readonly:"",label:"Date","data-vv-name":"date","error-messages":e.errors.collect("date")},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}},s))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{input:function(t){e.menu=!1}},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1),a("v-flex",{staticStyle:{border:"1px solid rgba(0,0,0,.1)","border-radius":"12px"},attrs:{xs12:"","pa-3":"","my-5":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md10:"",shrink:""}},[a("h1",{staticClass:"title"},[e._v(" Products ")])]),a("v-flex",{attrs:{xs12:"",md2:"",shrink:""}},[a("v-btn",{attrs:{rounded:"",color:"red"},on:{click:e.newProduct}},[e._v(" Add Product ")])],1)],1),e.form.products.length>0?a("transition-group",{attrs:{name:"fade"}},e._l(e.form.products,function(t,s){return a("v-layout",{key:s,staticStyle:{"border-radius":"15px"},attrs:{wrap:"","my-1":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",{attrs:{xs6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Products",items:e.products?e.products:[],"data-vv-name":"product_name_"+s,"error-messages":e.errors.collect("product_name_"+s),type:"search"},model:{value:e.form.products[s].product_id,callback:function(t){e.$set(e.form.products[s],"product_id",t)},expression:"form.products[index].product_id"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{loading:e.extras.projects.loading,items:e.extras.projects.data,label:"Project ID","data-vv-name":"project_id","error-messages":e.errors.collect("project_id")},model:{value:e.form.products[s].project_id,callback:function(t){e.$set(e.form.products[s],"project_id",t)},expression:"form.products[index].project_id"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min:1",expression:"'required|numeric|min:1'"}],attrs:{label:"Quantity","data-vv-name":"quantity_"+s,"error-messages":e.errors.collect("quantity_"+s)},model:{value:e.form.products[s].quantity,callback:function(t){e.$set(e.form.products[s],"quantity",t)},expression:"form.products[index].quantity"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal|min:1",expression:"'required|decimal|min:1'"}],attrs:{label:"Rate","data-vv-name":"rate_"+s,"error-messages":e.errors.collect("rate_"+s)},model:{value:e.form.products[s].avg_rate,callback:function(t){e.$set(e.form.products[s],"avg_rate",t)},expression:"form.products[index].avg_rate"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal|min:1",expression:"'required|decimal|min:1'"}],attrs:{label:"Delivered","data-vv-name":"rate_"+s,"error-messages":e.errors.collect("rate_"+s)},model:{value:e.form.products[s].delivered,callback:function(t){e.$set(e.form.products[s],"delivered",t)},expression:"form.products[index].delivered"}})],1),a("v-icon",{attrs:{"pa-2":"","my-2":""},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" delete ")])],1)],1)],1)}),1):e._e()],1),a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"title"},[e._v(" Terms Of Service ")]),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Payment","data-vv-name":"tac.payment","error-messages":e.errors.collect("tac.payment")},model:{value:e.form.tac.payment,callback:function(t){e.$set(e.form.tac,"payment",t)},expression:"form.tac.payment"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Remarks","data-vv-name":"tac.remarks","error-messages":e.errors.collect("tac.remarks")},model:{value:e.form.tac.remarks,callback:function(t){e.$set(e.form.tac,"remarks",t)},expression:"form.tac.remarks"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Tax Type","data-vv-name":"tac.tax_type","error-messages":e.errors.collect("tac.tax_type"),items:e.enums.tac},model:{value:e.form.tac.tax_type,callback:function(t){e.$set(e.form.tac,"tax_type",t)},expression:"form.tac.tax_type"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Warranty","data-vv-name":"tac.warranty","error-messages":e.errors.collect("tac.warranty")},model:{value:e.form.tac.warranty,callback:function(t){e.$set(e.form.tac,"warranty",t)},expression:"form.tac.warranty"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{label:"Delivery Period","data-vv-name":"tac.delivery_period","error-messages":e.errors.collect("tac.delivery_period")},model:{value:e.form.tac.delivery_period,callback:function(t){e.$set(e.form.tac,"delivery_period",t)},expression:"form.tac.delivery_period"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{label:"Tax Price","data-vv-name":"tac.tax_price","error-messages":e.errors.collect("tac.tax_price")},model:{value:e.form.tac.tax_price,callback:function(t){e.$set(e.form.tac,"tax_price",t)},expression:"form.tac.tax_price"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{items:["inclusive","extra at actual"],label:"Freight Tax","data-vv-name":"tac.freight_tax","error-messages":e.errors.collect("tac.freight_tax")},model:{value:e.form.tac.freight_tax,callback:function(t){e.$set(e.form.tac,"freight_tax",t)},expression:"form.tac.freight_tax"}})],1)],1)},et=[],tt={name:"project-form",mixins:[],props:{form:{type:Object,required:!0},products:{type:Array,required:!0},refProducts:{type:Object,required:!0}},components:{DataList:ae},data(){return{menu:!1,extras:{vendors:{data:[],loading:!0,error:!1,loaded:!1},projects:{loading:!0,error:!1,data:[]}},enums:{tac:[{text:"all inclusive in price",value:"all inclusive in price"},{text:"gst extra as applicable",value:"gst extra as applicable"},{text:"gst as mentioned",value:"gst as mentioned"}]},baseUrl:"http://34.83.223.211/api/v1/"}},watch:{"form.date":{deep:!0,handler:function(e){}}},mounted(){this.$emit("init"),this.$nextTick(()=>{})},computed:{},async created(){let e=await axios.get(this.baseUrl+"vendors",{withCredentials:!0});e&&(this.extras.vendors.loading=!1,this.extras.vendors.error=!1,this.extras.vendors.data=this.generateItems(e.data.results,"vendor_id")),this.getProjects()},methods:{newProduct(){let e={product_id:-1,project_id:-1,quantity:0,avg_rate:0,delivered:0};this.form.products.push(e)},deleteItem(e){this.form.products.splice(e,1)},formSubmit(){this.$validator.validateAll().then(e=>{})},validate(){return new Promise((e,t)=>{this.$validator.validateAll().then(t=>{e(this.form)}).catch(e=>{t(e)})})},cloneData(e,t,a){this.extras[t].data=this.generateItems(e.data.results,a),this.extras[t].loading=!0},cloneError(e){this.extras.clients.error=!0,this.extras.clients.loading=!1},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},async getProjects(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,withCredentials:!0,url:"projects",params:{client_id:this.form.client_id}});e.data.results&&(this.extras.projects.data=this.generateItems(e.data.results,"project_id"))}}},at=tt,st=(a("3072"),a("2e4b")),rt=a("e449"),it=Object(c["a"])(at,Xe,et,!1,null,null,null),nt=it.exports;m()(it,{VAutocomplete:$e["a"],VBtn:h["a"],VDatePicker:st["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VMenu:rt["a"],VSelect:ue["a"],VTextField:ve["a"]});var ot=a("2ef0"),dt=a.n(ot);const lt={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(lt);var ct={extends:ee,components:{DataList:ae,DataModel:se,EditPo:nt},props:{},data(){return{style:{parent:{background:"#F4F5F6",borderRadius:"15px"},heading:{opacity:".7"},subheading:{opacity:".5"}},entity:{},state:{error:!1},headers:[{text:"Product Name",value:"product_name"},{text:"stock",value:"stock"},{text:"avg_rate",value:"avg_rate"}],products:[],refProducts:[],endpoint:"purchase-orders",userMethod:0,dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,methodsEnums:lt,snackbar:{visible:!1,state:!1,message:""},baseUrl:"http://34.83.223.211/api/v1/"}},computed:{formTitle(){}},async created(){let e=await axios.get(this.baseUrl+"products");this.products=this.generateItems(e.data.results,"product_id"),e&&(this.refProducts=this.productsToObj(e.data.results))},mounted(){this.entity.project_id=Number(this.entity.project_id),this.entity.person_id=Number(this.entity.person_id)},methods:{productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},dialogOpen(){this.dialog=!0,this.userMethod=this.methodsEnums.PATCH},dialogClose(){this.dialog=!1},dialogSave(e){let t=dt.a.cloneDeep(this.entity);switch(t.products=JSON.stringify(t.products),void 0!=t.tac.freight_tax&&""!=t.tac.freight_tax&&null!=t.tac.freight_tax||delete t.tac.freight_tax,t.tac=JSON.stringify(t.tac),this.userMethod){case this.methodsEnums.POST:this.$refs.poRef.$validator.validateAll().then(a=>{a&&e.functions.create(t)});break;case this.methodsEnums.PATCH:this.$refs.poRef.$validator.validateAll().then(a=>{a&&e.functions.update(t)});break;case this.methodsEnums.DELETE:e.functions.remove({po_id:this.entity.po_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose(),this.reloadData()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},async reloadData(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"purchase-orders",params:{po_id:this.$route.params.id}});e&&(this.entity=Object.assign({},e.data.result[0]),this.entity.products=JSON.parse(this.entity.products))},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},ut=ct,mt=(a("a46c"),Object(c["a"])(ut,Ke,Ze,!1,null,null,null)),vt=mt.exports;m()(mt,{VDataTable:le["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"]});var ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min:3|max:64",expression:"'min:3|max:64'"}],attrs:{label:"Brand","data-vv-name":"brand","error-messages":e.errors.collect("brand")},model:{value:e.editedItem.brand,callback:function(t){e.$set(e.editedItem,"brand",t)},expression:"editedItem.brand"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"}],attrs:{label:"Hsn Code","data-vv-name":"hsn","error-messages":e.errors.collect("hsn")},model:{value:e.editedItem.hsn_code,callback:function(t){e.$set(e.editedItem,"hsn_code",t)},expression:"editedItem.hsn_code"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("data-list",{attrs:{endpoint:"units"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return a("div",{},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"units",loading:!r&&i?i:"",items:i||r?[]:e.generateItems(s.results,"unit_id"),"data-vv-name":"unit_names",error:r,"error-messages":e.errors.collect("unit_name")},model:{value:e.editedItem.unit_id,callback:function(t){e.$set(e.editedItem,"unit_id",t)},expression:"editedItem.unit_id"}})],1)}}],null,!1,228196837)})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"decimal",expression:"'decimal'"}],attrs:{label:"Igst","data-vv-name":"igst","error-messages":e.errors.collect("igst")},model:{value:e.editedItem.igst,callback:function(t){e.$set(e.editedItem,"igst",t)},expression:"editedItem.igst"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"decimal",expression:"'decimal'"}],attrs:{label:"cgst","data-vv-name":"cgst","error-messages":e.errors.collect("cgst")},model:{value:e.editedItem.cgst,callback:function(t){e.$set(e.editedItem,"cgst",t)},expression:"editedItem.cgst"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"decimal",expression:"'decimal'"}],attrs:{label:"sgst","data-vv-name":"sgst","error-messages":e.errors.collect("sgst")},model:{value:e.editedItem.sgst,callback:function(t){e.$set(e.editedItem,"sgst",t)},expression:"editedItem.sgst"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"description","data-vv-name":"description","error-messages":e.errors.collect("description")},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.product_id",fn:function(t){var s=t.item;return[a("div",{staticStyle:{"word-break":"break-word"}},[e._v("\n                                "+e._s(e._f("product")(s.product_id))+"\n                                ")])]}},{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},pt=[];const ft={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(ft);var xt={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"products",search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Product ID",value:"product_id"},{text:"Name",value:"name"},{text:"Brand",value:"brand"},{text:"Description",value:"description"},{text:"Unit",value:"unit_name"},{text:"Actions",value:"actions"}],enums:{type:["purchase","selling","trade"]},editedIndex:-1,editedItem:{},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0,igst:null,cgst:null,sgst:null,type:"purchase"},snackbar:{visible:!1,state:!1,message:""},methodsEnums:ft,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=e.unit_id,this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(delete this.editedItem.type,this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{t&&e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{t&&e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({product_id:this.editedItem.product_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},gt=xt,bt=(a("b6ca"),Object(c["a"])(gt,ht,pt,!1,null,null,null)),_t=bt.exports;m()(bt,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSelect:ue["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"],VTextarea:ye["a"]});var yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"email|min:3",expression:"'email|min:3'"}],attrs:{label:"Email","data-vv-name":"email","error-messages":e.errors.collect("email")},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{label:"Number","data-vv-name":"number","error-messages":e.errors.collect("number")},model:{value:e.editedItem.number,callback:function(t){e.$set(e.editedItem,"number",t)},expression:"editedItem.number"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{label:"designation","data-vv-name":"designation","error-messages":e.errors.collect("designation")},model:{value:e.form.designation,callback:function(t){e.$set(e.form,"designation",t)},expression:"form.designation"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{loading:e.extras.clients.loading,items:e.extras.clients.data,label:"Client ID","data-vv-name":"client_id","error-messages":e.errors.collect("client_id")},model:{value:e.editedItem.client_id,callback:function(t){e.$set(e.editedItem,"client_id",t)},expression:"editedItem.client_id"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{loading:e.extras.projects.loading,items:e.extras.projects.data,label:"Project ID","data-vv-name":"project_id","error-messages":e.errors.collect("project_id")},model:{value:e.editedItem.project_id,callback:function(t){e.$set(e.editedItem,"project_id",t)},expression:"editedItem.project_id"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.person_id",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("person")(a.person_id))+"\n                            ")]}},{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},kt=[];const Et={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(Et);var St={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"persons",search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Person ID",value:"person_id"},{text:"Name",value:"name"},{text:"Number",value:"number"},{text:"Email",value:"email"},{text:"Designation",value:"designation"},{text:"Client Name",value:"client_name"},{text:"Project Name",value:"project_name"},{text:"Actions",value:"actions"}],enums:{type:["purchase","selling","trade"]},editedIndex:-1,editedItem:{},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0},snackbar:{visible:!1,state:!1,message:""},methodsEnums:Et,userMethod:0,table:{sortBy:"",sortDesc:!1},extras:{projects:{loading:!0,error:!1,data:[]},clients:{loading:!0,error:!1,data:[]}}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()},"editedItem.client_id":{deep:!0,handler:async function(){this.editedItem.project_id="";let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"projects",params:{client_id:this.editedItem.client_id}});e.data.results&&(this.extras.projects.data=this.generateItems(e.data.results,"project_id"))}}},async created(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"clients"});e.data.results&&(this.extras.clients.data=this.generateItems(e.data.results,"client_id"))},async mounted(){},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{t&&e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{t&&e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({person_id:this.editedItem.person_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Tt=St,Ct=(a("3502"),Object(c["a"])(Tt,yt,kt,!1,null,null,null)),It=Ct.exports;m()(Ct,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSelect:ue["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"]});var wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"50%"},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{rows:"","justify-end":"","pr-5":""}},[a("v-flex",{attrs:{"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{lg6:"",shrink:""}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{label:"Stock","data-vv-name":"stock","error-messages":e.errors.collect("stock")},model:{value:e.editedItem.stock,callback:function(t){e.$set(e.editedItem,"stock",t)},expression:"editedItem.stock"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:0|decimal",expression:"'required|min:0|decimal'"}],attrs:{label:"Rate","data-vv-name":"rate","error-messages":e.errors.collect("rate")},model:{value:e.editedItem.avg_rate,callback:function(t){e.$set(e.editedItem,"avg_rate",t)},expression:"editedItem.avg_rate"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Project",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.extras.projects.data,"data-vv-name":"project","error-messages":e.errors.collect("project"),type:"search"},model:{value:e.editedItem.project_id,callback:function(t){e.$set(e.editedItem,"project_id",t)},expression:"editedItem.project_id"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Products","hide-selected":"",items:e.extras.products.data,"data-vv-name":"product_name","error-messages":e.errors.collect("product_name_"),type:"search"},model:{value:e.editedItem.product_id,callback:function(t){e.$set(e.editedItem,"product_id",t)},expression:"editedItem.product_id"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint+"/distinct/product"},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.inventory_id",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"inventory",params:{id:t.item.product_id}},append:""}},[a("div",[e._v(" "+e._s(e._f("inventory")(t.item.inventory_id)))])])]}},{key:"item.currency",fn:function(t){return[e._v("\n                                 "+e._s(e._f("currency")(t.item.total_amount))+"\n                            \n                            ")]}}],null,!0)})],1)}}])})],1)],1)},jt=[];const $t={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze($t);var Pt={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"inventory",extras:{products:{data:[],loading:!0,error:!1,loaded:!1},projects:{loading:!0,error:!1,data:[]}},search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Inventory ID",value:"inventory_id"},{text:"Product name",value:"product_name"},{text:"Type",value:"inventory_type"},{text:"Stock",value:"stock"},{text:"Avg Rate",value:"avg_rate"},{text:"Total Amount",value:"total_amount"},{text:"Unit",value:"unit_name"}],enums:{type:["purchase","selling","trade"]},editedIndex:-1,editedItem:{type:1},defaultItem:{project_id:null,product_id:null,stock:null,avg_rate:null,type:1},snackbar:{visible:!1,state:!1,message:""},methodsEnums:$t,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){},async created(){this.getProjects(),this.getProducts()},methods:{async getProjects(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"projects",params:{}});e.data.results&&(this.extras.projects.loading=!1,this.extras.projects.data=this.generateItems(e.data.results,"project_id"))},async getProducts(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"products",params:{}});e.data.results&&(this.extras.products.loading=!1,this.extras.products.data=this.generateItems(e.data.results,"product_id"))},async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{t&&e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{t&&e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({inventory_id:this.editedItem.inventory_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Dt=Pt,Vt=(a("67d7"),Object(c["a"])(Dt,wt,jt,!1,null,null,null)),Ot=Vt.exports;m()(Vt,{VAutocomplete:$e["a"],VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VLayout:g["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"]});var At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","persistent-hint":"required","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"integer|max:10",expression:"'integer|max:10'"}],attrs:{label:"Mobile","data-vv-name":"mobile","error-messages":e.errors.collect("mobile")},model:{value:e.editedItem.mobile,callback:function(t){e.$set(e.editedItem,"mobile",t)},expression:"editedItem.mobile"}})],1),a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"email",expression:"'email'"}],attrs:{label:"Email","data-vv-name":"email","error-messages":e.errors.collect("email")},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"min:3|max:128",expression:"'min:3|max:128'"}],attrs:{label:"Address","data-vv-name":"address","error-messages":e.errors.collect("address")},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"GST NO","persistent-hint":"required","data-vv-name":"gst_no","error-messages":e.errors.collect("gst_no")},model:{value:e.editedItem.gst_no,callback:function(t){e.$set(e.editedItem,"gst_no",t)},expression:"editedItem.gst_no"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.vendor_id",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("vendor")(a.vendor_id))+"\n                            ")]}},{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},qt=[];const Nt={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(Nt);var Lt={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"vendors",search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Vendor ID",value:"vendor_id"},{text:"Name",value:"name"},{text:"Mobile",value:"mobile"},{text:"Email",value:"email"},{text:"address",value:"address"},{text:"Gst No",value:"gst_no"},{text:"Actions",value:"actions"}],enums:{},editedIndex:-1,editedItem:{},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0,gst_no:""},snackbar:{visible:!1,state:!1,message:""},methodsEnums:Nt,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{t&&e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{t&&e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({vendor_id:this.editedItem.vendor_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Mt=Lt,Ht=(a("0780"),Object(c["a"])(Mt,At,qt,!1,null,null,null)),Ut=Ht.exports;m()(Ht,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"],VTextarea:ye["a"]});var Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("edit-po",{attrs:{form:e.editedItem,products:e.products,refProducts:e.refProducts},on:{"update:form":function(t){e.editedItem=t}}})],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e.userMethod==e.methodsEnums.APPROVE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update,o=(t.error,t.dynamic);return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n,dynamic:o}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.po_id",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"po",params:{id:t.item.po_id}},append:""}},[a("div",[e._v(" "+e._s(e._f("po")(t.item.po_id)))])])]}},{key:"item.date",fn:function(t){return[e._v("\n                                 "+e._s(e._f("formatDate")(t.item.date))+"\n                            ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}},{key:"item.status",fn:function(t){var s=t.item;return[s.status?[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"green"}},[e._v("   \n                                                        check_circle\n                                                    ")]),e._v("\n                                                    Approved\n                                                ")]:[a("div",{staticStyle:{cursor:"pointer !important"},on:{click:function(t){e.dialog=!0,e.userMethod=e.methodsEnums.APPROVE,e.editedItem=Object.assign({},s)}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"red"}},[e._v("   \n                                                        remove_circle\n                                                    ")]),e._v("\n                                                     Approve Now\n\n                                                    ")],1)]]}}],null,!0)})],1)}}])})],1)],1)},Rt=[];const Wt={GET:0,POST:1,PATCH:2,DELETE:3,APPROVE:4};Object.freeze(Wt);var Ft={extends:ee,components:{DataList:ae,DataModel:se,editPo:nt},data(){return{endpoint:"purchase-orders",search:"",products:[],refProducts:[],dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Purchase Order ID",value:"po_id"},{text:"Subject",value:"subject"},{text:"date",value:"date"},{text:"Vendor Name",value:"vendor_name"},{text:"Status",value:"status"}],enums:{type:["purchase","selling","trade"]},editedIndex:-1,editedItem:{date:this.$dayjs().format("YYYY-MM-DD"),products:[{product_id:-1,project_id:-1,quantity:0,avg_rate:0,delivered:0}],ref:"",tac:{payment:"",remarks:"",tax_type:"",warranty:"",tax_price:1,freight_tax:null,delivery_period:0}},defaultItem:{date:this.$dayjs().format("YYYY-MM-DD"),products:[{product_id:-1,project_id:-1,quantity:0,avg_rate:0,delivered:0}],ref:"",tac:{payment:"",remarks:"",tax_type:"",warranty:"",tax_price:1,freight_tax:null,delivery_period:0}},snackbar:{visible:!1,state:!1,message:""},methodsEnums:Wt,userMethod:0,table:{sortBy:"",sortDesc:!1},baseUrl:"http://34.83.223.211/api/v1/"}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";case this.methodsEnums.APPROVE:return"Approve Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){let e=await axios.get(this.baseUrl+"products",{withCredentials:!0});this.products=this.generateItems(e.data.results,"product_id"),e&&(this.refProducts=this.productsToObj(e.data.results))},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t,withCredentials:!0})},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){let t=dt.a.cloneDeep(this.editedItem);switch(t.products=JSON.stringify(t.products),t.tac=JSON.stringify(t.tac),this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(a=>{a&&e.functions.create(t)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(a=>{a&&e.functions.update(t)});break;case this.methodsEnums.DELETE:e.functions.remove({inventory_id:this.editedItem.inventory_id});break;case this.methodsEnums.APPROVE:e.functions.dynamic("delivery","patch",t);break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"saved";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted";case this.methodsEnums.APPROVE:return"approve"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"save";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete";case this.methodsEnums.APPROVE:return"approve"}}}},Gt=Ft,zt=(a("b2f4"),Object(c["a"])(Gt,Bt,Rt,!1,null,null,null)),Jt=zt.exports;m()(zt,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"]});var Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s())])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[[a("edit-stock",{ref:"jc",attrs:{form:e.editedItem},on:{"update:form":function(t){e.editedItem=t}}})]],2):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(this.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e.userMethod==e.methodsEnums.APPROVE?a("v-layout",{attrs:{wrap:""}},[a("h1",{staticClass:"display-1"},[e._v(" Are you sure, you want to Approve this ? ")]),e._l(Object.values(this.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2",staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"}},[e._v(" \n                            "+e._s(t)+" \n                            \n                        ")])})],2):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.approve,r=t.remove,i=(t.data,t.loading),n=t.create,o=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:i,text:""},on:{click:function(t){return e.dialogSave({functions:{create:n,approve:s,remove:r,update:o}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{"py-5":""}},[a("v-flex",{attrs:{"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("data-list",{key:e.dl_key,attrs:{endpoint:"stock-transfer"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=(t.error,t.loading);return[[a("v-layout",{attrs:{wrap:"","fill-height":""}},[a("v-flex",{attrs:{xs12:"","py-1":""}},[a("v-layout",{attrs:{"justify-end":""}},[a("v-flex",{attrs:{shrink:"","px-2":""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticStyle:{"border-radius":"15px",padding:"2px",transform:"scale(1)","text-align":"center",border:"1px solid rgba(0,0,0,.1)",outline:"none"},attrs:{"single-line":"",type:"text",rounded:"",placeholder:"Search",outlined:"","prepend-inner-icon":"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),a("v-flex",{attrs:{shrink:""}},[a("v-btn",{attrs:{rounded:""},on:{click:e.dialogOpen}},[e._v(" Add ")])],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{attrs:{headers:e.headers,items:s&&s.results?s.results:[],search:e.search,loading:r},scopedSlots:e._u([{key:"item.st_id",fn:function(t){var a=t.item;return[e._v("\n                                                "+e._s(e._f("stock")(a.st_id))+"\n                                            ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("   \n                                                    edit\n                                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                                delete\n                                                ")])]}},{key:"item.status",fn:function(t){var s=t.item;return[s.status?[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"green"}},[e._v("   \n                                                        check_circle\n                                                    ")]),e._v("\n                                                    Approved\n                                                ")]:[a("div",{staticStyle:{cursor:"pointer !important"},on:{click:function(t){e.dialog=!0,e.userMethod=e.methodsEnums.APPROVE,e.editedItem=Object.assign({},s)}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"red"}},[e._v("   \n                                                        remove_circle\n                                                    ")]),e._v("\n                                                     Approve Now\n\n                                                    ")],1)]]}}],null,!0)})],1)],1)]]}}])})],1)],1)},Qt=[],Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{staticStyle:{"enable-background":"new 0 0 567.419 567.419"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 567.419 567.419","xml:space":"preserve"}},[a("g",[a("g",[a("g",{attrs:{id:"group-3svg"}},[a("path",{attrs:{id:"path-1_21_",d:"M409.93,209.297c0,18.056-14.627,32.692-32.683,32.692c-18.047,0-32.683-14.636-32.683-32.692\n\t\t\t\t\ts14.636-32.683,32.683-32.683C395.303,176.614,409.93,191.241,409.93,209.297z"}}),a("path",{attrs:{id:"path-2_21_",d:"M222.011,209.297c0,18.056-14.636,32.692-32.683,32.692s-32.683-14.636-32.683-32.692\n\t\t\t\t\ts14.636-32.683,32.683-32.683S222.011,191.241,222.011,209.297z"}}),a("path",{attrs:{id:"path-3_21_",d:"M172.538,453.621c-7.434,0-13.468-6.025-13.468-13.468c0-58.138,46.762-105.439,104.245-105.439h45.397\n\t\t\t\t\tc57.483,0,104.245,47.04,104.245,104.855c0,7.443-6.025,13.477-13.468,13.477c-7.435,0-13.459-6.034-13.459-13.477\n\t\t\t\t\tc0-42.955-34.685-77.91-77.317-77.91h-45.397c-42.632,0-77.308,35.206-77.308,78.493\n\t\t\t\t\tC186.006,447.596,179.972,453.621,172.538,453.621z"}}),a("path",{attrs:{id:"path-4_21_",d:"M283.714,567.419c-156.403,0-283.642-127.275-283.642-283.714C0.072,127.275,127.311,0,283.714,0\n\t\t\t\t\tc156.394,0,283.633,127.275,283.633,283.705C567.347,440.143,440.108,567.419,283.714,567.419z M283.714,26.946\n\t\t\t\t\tc-141.552,0-256.705,115.181-256.705,256.759c0,141.588,115.154,256.768,256.705,256.768\n\t\t\t\t\tc141.543,0,256.696-115.181,256.696-256.768C540.41,142.126,425.257,26.946,283.714,26.946z"}})])])])])},Zt=[],Xt={},ea=Xt,ta=Object(c["a"])(ea,Kt,Zt,!1,null,null,null),aa=ta.exports,sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",e._b({attrs:{wrap:""}},"v-layout",e.$attrs,!1),[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Sender",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.extras.projects.data,"data-vv-name":"sender","error-messages":e.errors.collect("sender"),type:"search"},model:{value:e.form.sender,callback:function(t){e.$set(e.form,"sender",t)},expression:"form.sender"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Receiver",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.receiverItems,"data-vv-name":"receiver","error-messages":e.errors.collect("receiver"),type:"search"},model:{value:e.form.receiver,callback:function(t){e.$set(e.form,"receiver",t)},expression:"form.receiver"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"Reason","data-vv-name":"reason","error-messages":e.errors.collect("reason")},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),a("v-flex",{staticStyle:{border:"1px solid rgba(0,0,0,.1)","border-radius":"12px"},attrs:{xs12:"","pa-3":"","my-5":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md10:"",shrink:""}},[a("h1",{staticClass:"title"},[e._v(" transfers ")])]),a("v-flex",{attrs:{xs12:"",md2:"",shrink:""}},[a("v-btn",{attrs:{rounded:"",color:"red"},on:{click:e.newProduct}},[e._v(" Add Product ")])],1)],1),e.form.transfers.length>0?a("transition-group",{attrs:{name:"fade"}},e._l(e.form.transfers,function(t,s){return a("v-layout",{key:s,staticStyle:{"border-radius":"15px"},attrs:{wrap:"","my-1":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-layout",[a("v-flex",{attrs:{xs6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Products","hide-selected":"",items:e.extras.products.data,"data-vv-name":"product_name_"+s,"error-messages":e.errors.collect("product_name_"+s),type:"search"},on:{change:e.changed},model:{value:e.form.transfers[s].product_id,callback:function(t){e.$set(e.form.transfers[s],"product_id",t)},expression:"form.transfers[index].product_id"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-text-field",{attrs:{label:"Stock","v-validate":e.generateValidation(t),"data-vv-name":"stock_"+s,"error-messages":e.errors.collect("stock_"+s)},model:{value:e.form.transfers[s].stock,callback:function(t){e.$set(e.form.transfers[s],"stock",t)},expression:"form.transfers[index].stock"}})],1),a("v-flex",{attrs:{shrink:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"decimal|min:0",expression:"'decimal|min:0'"}],attrs:{label:"Rate","data-vv-name":"rate_"+s,"error-messages":e.errors.collect("rate_"+s)},model:{value:e.form.transfers[s].avg_rate,callback:function(t){e.$set(e.form.transfers[s],"avg_rate",t)},expression:"form.transfers[index].avg_rate"}})],1),a("v-icon",{attrs:{"pa-2":"","my-2":""},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" delete ")])],1)],1)],1)}),1):e._e()],1)],1)},ra=[],ia={name:"project-form",mixins:[],props:{form:{type:Object,required:!0},products:{type:Array,required:!1},refProducts:{type:Object,required:!1}},components:{DataList:ae},data(){return{menu:!1,used:[],extras:{products:{data:[{text:"",value:"",max:0}],loading:!0,error:!1,loaded:!1},projects:{loading:!0,error:!1,data:[]}},enums:{tac:[{text:"all inclusive in price",value:"all inclusive in price"},{text:"gst extra as applicable",value:"gst extra as applicable"},{text:"gst as mentioned",value:"gst as mentioned"}]},baseUrl:"http://34.83.223.211/api/v1/"}},watch:{"form.date":{deep:!0,handler:function(e){}},"form.sender":{deep:!1,handler:async function(e){e&&this.getProducts()}}},mounted(){this.$emit("init"),this.$nextTick(()=>{})},computed:{receiverItems(){return this.extras.projects.data.length>0?this.extras.projects.data.filter((e,t,a)=>e.value!=this.form.sender):[]},filteredProducts(){if(this.extras.products.data.length>0)return this.extras.products.data.filter((e,t,a)=>!this.used.includes(e.value))}},async created(){this.getProjects()},methods:{generateValidation(e){let t="'required|decimal|min:0'";return t},changed(e){},newProduct(){let e={product_id:null,stock:null,avg_rate:null};this.form.transfers.push(e)},deleteItem(e){this.form.transfers.splice(e,1)},formSubmit(){this.$validator.validateAll().then(e=>{})},validate(){return new Promise((e,t)=>{this.$validator.validateAll().then(t=>{e(this.form)}).catch(e=>{t(e)})})},cloneData(e,t,a){this.extras[t].data=this.generateItems(e.data.results,a),this.extras[t].loading=!0},cloneError(e){this.extras.clients.error=!0,this.extras.clients.loading=!1},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},generateItemsNew(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.product_name+` [ In Stock :- ${e.stock} ]`,value:e[t],max:e.stock})}),a},async getProjects(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"projects",withCredentials:!0,params:{}});e.data.results&&(this.extras.projects.loading=!1,this.extras.projects.data=this.generateItems(e.data.results,"project_id"))},async getProducts(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,withCredentials:!0,url:"inventory/project",params:{project_id:this.form.sender}});return e.data.result&&(this.extras.products.loading=!1,this.extras.products.data=this.generateItemsNew(e.data.result,"product_id")),e}}},na=ia,oa=(a("bb8f"),Object(c["a"])(na,sa,ra,!1,null,null,null)),da=oa.exports;m()(oa,{VAutocomplete:$e["a"],VBtn:h["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VTextField:ve["a"]});const la={GET:0,POST:1,PATCH:2,DELETE:3,APPROVE:4};var ca={name:"stock-transfer",extends:ee,components:{DataList:ae,DataModel:se,sad:aa,EditStock:da},props:{},mounted(){},data(){return{search:"",headers:[{text:"Stock Transfer ID",value:"st_id"},{text:"From",value:"sender_name"},{text:"To",value:"receiver_name"},{text:"Reason",value:"reason"},{text:"Status",value:"status"},{text:"Actions",value:"actions"}],snackbar:{visible:!1,state:!1,message:""},dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,endpoint:"stock-transfer",methodsEnums:la,editedItem:{},default:{sender:null,receiver:null,reason:"",transfers:[{product_id:null,stock:null,avg_rate:null}]},userMethod:""}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}}},methods:{actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogOpen(){this.dialog=!0,this.userMethod=this.methodsEnums.POST,this.editedItem=Object.assign({},this.default)},dialogClose(){this.dialog=!1},dialogSave(e){let t=_.cloneDeep(this.editedItem);switch(t.transfers=JSON.stringify(t.transfers),this.userMethod){case this.methodsEnums.POST:this.$refs.jc.$validator.validateAll().then(a=>{a&&e.functions.create(t)});break;case this.methodsEnums.PATCH:this.$refs.jc.$validator.validateAll().then(a=>{a&&e.functions.update(t)});break;case this.methodsEnums.DELETE:e.functions.remove({st_id:this.editedItem.st_id});break;case this.methodsEnums.APPROVE:e.functions.approve(t.st_id);break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted";case this.methodsEnums.APPROVE:return"approved"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete";case this.methodsEnums.APPROVE:return"approve"}},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t}}},ua=ca,ma=Object(c["a"])(ua,Yt,Qt,!1,null,null,null),va=ma.exports;m()(ma,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSnackbar:me["a"],VSpacer:C["a"]});var ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"justify-center":"","align-center":"",fluid:"","fill-height":""}},[a("v-flex",{staticClass:"login",attrs:{shrink:"","pa-5":"",xs12:"",lg6:""}},[a("v-layout",{attrs:{wrap:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{shrink:"","my-3":""}},[a("h1",{staticClass:"display-1",staticStyle:{color:"white",opacity:".7"}},[e._v(" Hello There ")])]),a("v-flex",{attrs:{xs12:""}},[a("login")],1)],1)],1)],1)},pa=[],fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:""}},[a("v-snackbar",{attrs:{top:"",color:e.snackbar.color},model:{value:e.snackbar.status,callback:function(t){e.$set(e.snackbar,"status",t)},expression:"snackbar.status"}},[a("v-layout",{attrs:{"justify-center":""}},[a("h1",{staticClass:"body-1"},[e._v(" "+e._s(e.snackbar.message)+" ")])])],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{label:"Email",solo:"",rounded:"",filled:!e.isFirefox(),dark:"","data-vv-name":"email","error-messages":e.errors.collect("email")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"password",type:"password",solo:"",rounded:"",filled:!e.isFirefox(),dark:"","data-vv-name":"password","error-messages":e.errors.collect("password")},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-flex",{attrs:{xs12:"",grow:""}},[a("v-btn",{attrs:{text:"",color:"info",light:"",rounded:"",width:"100%"},on:{click:e.onLogin}},[e._v(" login ")])],1)],1)},xa=[],ga=a("4328"),ba=a.n(ga),_a={mounted(){1==this.$root.$data.$loggedIn&&this.$router.push("/clients")},data(){return{isLoggedIn(){return this.$root.$data.$loggedIn},email:"",password:"",snackbar:{message:"",status:!1,color:""}}},methods:{isFirefox(){return"undefined"!==typeof InstallTrigger},onLogin(){this.$validator.validateAll().then(e=>{e&&axios({method:"POST",baseURL:this.$config.baseUrl,url:"/login_f",withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ba.a.stringify({email:this.email,password:this.password})}).then(e=>{e&&(this.$root.$data.$loggedIn=!0,this.$root.$data.$name=e.data.name,this.$nextTick(()=>{this.$router.push("/clients")}))}).catch(e=>{this.$root.$data.$loggedIn=!1,400==e.response.status?(this.snackbar.message="Invalid form details. Please rectify errors in the login form",this.snackbar.color="red",this.snackbar.status=!0):401==e.response.status&&(this.snackbar.message="Incorrect login details.",this.snackbar.color="orange",this.snackbar.status=!0)})})}}},ya=_a,ka=Object(c["a"])(ya,fa,xa,!1,null,null,null),Ea=ka.exports;m()(ka,{VBtn:h["a"],VFlex:p["a"],VLayout:g["a"],VSnackbar:me["a"],VTextField:ve["a"]});var Sa={components:{login:Ea}},Ta=Sa,Ca=(a("66c0"),Object(c["a"])(Ta,ha,pa,!1,null,null,null)),Ia=Ca.exports;m()(Ca,{VFlex:p["a"],VLayout:g["a"]});var wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,staticStyle:{"z-index":"500  !important"},attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{label:"Email","data-vv-name":"email","error-messages":e.errors.collect("email")},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"min:3|max:64",expression:"'min:3|max:64'"}],attrs:{label:"Password","data-vv-name":"password","error-messages":e.errors.collect("password")},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{attrs:{wrap:"","align-center":""}},[e._l(e.roles,function(t){return[a("v-flex",{attrs:{xs3:"",shrink:""}},[a("h1",{staticClass:"body-1"},[e._v("  "+e._s(t)+"  ")])]),a("v-flex",{attrs:{xs9:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{label:"roles",multiple:"",items:e.rolesItems,"data-vv-name":t+"_role","error-messages":e.errors.collect(t+"_role")},model:{value:e.editedItem.roles[t],callback:function(a){e.$set(e.editedItem.roles,t,a)},expression:"editedItem.roles[i]"}})],1)]})],2)],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.user_id",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("user")(a.user_id))+"\n                            ")]}},{key:"item.roles",fn:function(t){var s=t.item;return[Object.keys(s.roles).length>0?a("v-expansion-panels",{attrs:{value:!1}},[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Show")]),a("v-expansion-panel-content",[Object.keys(s.roles).length>0?a("div",{staticClass:"pa-2"},[e._l(Object.keys(s.roles),function(t){return[a("v-layout",{attrs:{"pa-1":"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs3:""}},[e._v(" "+e._s(e._f("capitalize")(t))+" ")]),a("v-flex",[e._l(s.roles[t],function(t){return[a("v-chip",{staticClass:"mx-1"},[e._v("\n                                                                "+e._s(e.machineToHuman(t))+"\n                                                            ")])]})],2)],1)]})],2):e._e()])],1)],1):e._e()]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},ja=[];const $a={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze($a);var Pa={extends:ee,components:{DataList:ae,DataModel:se},data(){return{expand:!1,endpoint:"users",search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"User ID",value:"user_id"},{text:"email",value:"email"},{text:"Name",value:"name"},{text:"Actions",value:"actions"},{text:"Roles",value:"roles"}],roles:["users","clients","persons","vendors","jobcards","products","projects","inventory","stock-transfer","purchase-orders"],enums:{type:["purchase","selling","trade"]},editedIndex:-1,editedItem:{},defaultItem:{email:0,password:"",name:"",roles:{clients:[],persons:[],vendors:[],jobcards:[],products:[],projects:[],inventory:[],"stock-transfer":[],"purchase-orders":[]}},rolesItems:[{text:"Read",value:"get"},{text:"Insert",value:"post"},{text:"Update",value:"patch"},{text:"Delete",value:"delete"}],snackbar:{visible:!1,state:!1,message:""},methodsEnums:$a,userMethod:0,table:{sortBy:"",sortDesc:!1},extras:{projects:{loading:!0,error:!1,data:[]},clients:{loading:!0,error:!1,data:[]}}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()},"editedItem.client_id":{deep:!0,handler:async function(){this.editedItem.project_id="";let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"projects",params:{client_id:this.editedItem.client_id}});e.data.results&&(this.extras.projects.data=this.generateItems(e.data.results,"project_id"))}}},async created(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"clients"});e.data.results&&(this.extras.clients.data=this.generateItems(e.data.results,"client_id"))},async mounted(){this.editedItem=Object.assign({},this.defaultItem)},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},machineToHuman(e){switch(e){case"get":return"Read";case"post":return"Insert";case"patch":return"Update";case"delete":return"Delete"}},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){let t=dt.a.cloneDeep(this.editedItem);switch(t.roles=JSON.stringify(t.roles),this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(a=>{a&&e.functions.create(t)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(a=>{a&&e.functions.update(t)});break;case this.methodsEnums.DELETE:e.functions.remove({user_id:this.editedItem.user_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Da=Pa,Va=(a("8702"),a("cc20")),Oa=a("cd55"),Aa=a("49e2"),qa=a("c865"),Na=a("0393"),La=Object(c["a"])(Da,wa,ja,!1,null,null,null),Ma=La.exports;m()(La,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VChip:Va["a"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VExpansionPanel:Oa["a"],VExpansionPanelContent:Aa["a"],VExpansionPanelHeader:qa["a"],VExpansionPanels:Na["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSelect:ue["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"]});var Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("data-list",{attrs:{endpoint:"clients",entity:{client_id:e.$route.params.id}},on:{success:e.test},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return a("div",{},[a("v-layout",{staticClass:"white elevation-2",staticStyle:{"border-radius":"20px"},attrs:{"pa-5":"",row:"","fill-height":"","justify-center":i,wrap:""}},[[i?[a("v-flex",{attrs:{shrink:"","align-self-center":""}},[a("v-progress-circular",{attrs:{size:70,width:7,color:"red",indeterminate:""}})],1)]:[!r&&s.result.length>0?[a("v-flex",{staticClass:"white elevastion-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"",lg3:"","py-5":"","px-3":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")]),a("client-details",{staticClass:"pa-5",attrs:{entity:s.result[0]}})],1),a("v-flex",{attrs:{xs12:"",lg9:"","py-5":""}},[a("div",{staticClass:"elevation-2",staticStyle:{"border-radius":"20px"}},[a("v-tabs",{staticClass:"elevation-0 myTabs",staticStyle:{"border-radius":"20px 20px 0 0",background:"#F5EAEA"},attrs:{"active-class":"tab-active"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v(" Projects ")]),a("v-tab",[e._v(" Persons ")]),a("v-tab",[e._v(" Job Cards ")])],1),a("v-tabs-items",{staticClass:"tab-item py-2",staticStyle:{height:"100%"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("client-projects",{attrs:{entity:{client_id:s.result[0].client_id}}})],1),a("v-tab-item",[a("client-persons",{attrs:{entity:{client_id:s.result[0].client_id}}})],1),a("v-tab-item",[a("client-jobcards",{attrs:{entity:{client_id:s.result[0].client_id}}})],1)],1)],1)])]:a("not-found",{attrs:{name:"client"}})]]],2)],1)}}])})},Ua=[],Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{staticStyle:{opacity:".5"},attrs:{"fill-height":"","justify-center":"","align-center":""}},[a("v-flex",{attrs:{xs3:"",shrink:""}},[a("sad",{staticStyle:{height:"20vh"}})],1),a("v-flex",{attrs:{xs8:"",shrink:""}},[a("h1",{staticClass:"display-1"},[e._v(" No such "+e._s(e.name?e.name:"data")+" found  ")])])],1)},Ra=[],Wa={props:{name:{type:String}},components:{sad:aa}},Fa=Wa,Ga=Object(c["a"])(Fa,Ba,Ra,!1,null,null,null),za=Ga.exports;m()(Ga,{VFlex:p["a"],VLayout:g["a"]});var Ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{stsyle:"background: rgba(0,0,0,.1); border-radius: 25px","my-2":"",row:"",wrap:"","justify-left":"","align-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-icon",{attrs:{size:"128"}},[e._v(" supervised_user_circle ")])],1),a("v-flex",{attrs:{xs12:"",lg12:"","my-1":""}},[a("v-layout",{attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticStyle:{opacity:".5"},attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v(" NAME   ")])]),a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v("\n                        "+e._s(e.form.name)+"\n                    ")])])],1)],1),a("v-flex",{attrs:{xs12:"",lg12:"","my-1":""}},[a("v-layout",{attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticStyle:{opacity:".5"},attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v(" STATE   ")])]),a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v("\n                        "+e._s(e.form.state)+"\n                    ")])])],1)],1),a("v-flex",{attrs:{xs12:"",lg12:"","my-1":""}},[a("v-layout",{attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticStyle:{opacity:".5"},attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v(" ADDRESS   ")])]),a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v("\n                        "+e._s(e.form.address)+"\n                    ")])])],1)],1),a("v-flex",{attrs:{xs12:"",lg12:"","my-1":""}},[a("v-layout",{attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticStyle:{opacity:".5"},attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v(" GST NO.   ")])]),a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v("\n                        "+e._s(e.form.gst_no)+"\n                    ")])])],1)],1),a("v-flex",{attrs:{xs12:"",lg12:"","my-1":""}},[a("v-layout",{attrs:{"align-center":"",wrap:""}},[a("v-flex",{staticStyle:{opacity:".5"},attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v(" PROJECT TYPE   ")])]),a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"body-2"},[e._v("\n                        "+e._s(e.form.project_type)+"\n                    ")])])],1)],1)],1)},Ya=[],Qa={props:{entity:{type:Object,required:!0}},data(){return{form:this.entity||this.default,default:{name:"",state:"",address:"",gst_no:"",project_type:""}}},mounted(){}},Ka=Qa,Za=Object(c["a"])(Ka,Ja,Ya,!1,null,null,null),Xa=Za.exports;m()(Za,{VFlex:p["a"],VIcon:f["a"],VLayout:g["a"]});var es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"fill-height":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s())])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST?a("v-layout",{attrs:{wrap:""}},[[a("edit-jobcard",{ref:"jc",attrs:{form:e.editedItem,products:e.products,refProducts:e.refProducts},on:{"update:form":function(t){e.editedItem=t}}})]],2):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(this.entity),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("v-flex",[a("data-list",{key:e.dl_key,attrs:{endpoint:"jobcards",entity:e.entity},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return[i?[a("v-flex",{attrs:{shrink:"","align-self-center":""}},[a("v-progress-circular",{attrs:{size:16,width:7,color:"red",indeterminate:""}})],1)]:[[[a("v-layout",{attrs:{wrap:"","fill-height":""}},[a("v-flex",{attrs:{xs12:"","py-1":""}},[a("v-layout",{attrs:{"justify-end":""}},[a("v-flex",{attrs:{shrink:"","px-2":""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticStyle:{"border-radius":"15px",padding:"2px",transform:"scale(1)","text-align":"center",border:"1px solid rgba(0,0,0,.1)",outline:"none"},attrs:{"single-line":"",type:"text",rounded:"",placeholder:"Search",outlined:"","prepend-inner-icon":"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),a("v-flex",{attrs:{shrink:"","px-2":""}},[a("v-btn",{attrs:{small:"",rounded:""},on:{click:e.dialogOpen}},[e._v(" Add ")])],1)],1)],1),!r&&s.results.length>0?a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{attrs:{dense:"",headers:e.headers,items:s.results,search:e.search},scopedSlots:e._u([{key:"item.jobcard_id",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"tr",to:{name:"jobcard",params:{id:t.item["jobcard_id"]}}}},[a("td",[e._v(" "+e._s(e._f("jobcard")(t.item.jobcard_id)))])])]}}],null,!0)})],1):e._e()],1)]]]]}}])})],1)],1)},ts=[],as=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",e._b({attrs:{wrap:""}},"v-layout",e.$attrs,!1),[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Clients",loading:!(e.extras.clients.error||!e.extras.clients.loading)&&e.extras.clients.loading,items:e.extras.clients.loading||e.extras.clients.error?[]:e.extras.clients.data,"data-vv-name":"client_names","error-messages":e.errors.collect("client_names"),type:"search"},model:{value:e.form.client_id,callback:function(t){e.$set(e.form,"client_id",t)},expression:"form.client_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Projects",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.extras.projects.data,"data-vv-name":"project_names","error-messages":e.errors.collect("project_names"),type:"search"},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Persons",loading:!(e.extras.persons.error||!e.extras.persons.loading)&&e.extras.persons.loading,items:e.extras.persons.loading||e.extras.persons.error?[]:e.extras.persons.data,"data-vv-name":"person_names","error-messages":e.errors.collect("person_names")},model:{value:e.form.person_id,callback:function(t){e.$set(e.form,"person_id",t)},expression:"form.person_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"Location","data-vv-name":"location","error-messages":e.errors.collect("location")},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"numeric|required|min:1",expression:"'numeric|required|min:1'"}],attrs:{label:"Revision","data-vv-name":"revision","error-messages":e.errors.collect("revision")},model:{value:e.form.revision,callback:function(t){e.$set(e.form,"revision",t)},expression:"form.revision"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Tfpc's Site Supervisor","data-vv-name":"site_supervisor","error-messages":e.errors.collect("site_supervisor")},model:{value:e.form.site_supervisor,callback:function(t){e.$set(e.form,"site_supervisor",t)},expression:"form.site_supervisor"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Autocad Engineer","data-vv-name":"autocad_engineer","error-messages":e.errors.collect("autocad_engineer")},model:{value:e.form.autocad_engineer,callback:function(t){e.$set(e.form,"autocad_engineer",t)},expression:"form.autocad_engineer"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Plan Approved By","data-vv-name":"plan_approved_by","error-messages":e.errors.collect("plan_approved_by")},model:{value:e.form.plan_approved_by,callback:function(t){e.$set(e.form,"plan_approved_by",t)},expression:"form.plan_approved_by"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Labour Contractor","data-vv-name":"labour_contractor","error-messages":e.errors.collect("labour_contractor")},model:{value:e.form.labour_contractor,callback:function(t){e.$set(e.form,"labour_contractor",t)},expression:"form.labour_contractor"}})],1),a("v-flex",{attrs:{shrink:"","align-self-end":""}},[a("v-btn",{on:{click:e.newHeading}},[e._v(" Add Product ")])],1),e.form.products_headings.length>0?a("v-flex",{attrs:{xs12:""}},e._l(e.form.products_headings,function(t,s){return a("v-layout",{staticStyle:{"border-radius":"15px"},attrs:{wrap:"","my-5":"","pa-5":"","align-center":""}},[a("v-flex",{attrs:{xs11:""}},[a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Heading","data-vv-name":"heading_"+s,"error-messages":e.errors.collect("heading_"+s)},model:{value:e.form.products_headings[s].heading,callback:function(t){e.$set(e.form.products_headings[s],"heading",t)},expression:"form.products_headings[index].heading"}})],1)]),a("v-flex",{attrs:{xs1:"",shrink:""}},[a("v-icon",{on:{click:function(t){return e.removeHeading(s)}}},[e._v(" delete ")])],1),a("v-flex",{attrs:{xs12:""}},[a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Sub-heading","data-vv-name":"subheading"+s,"error-messages":e.errors.collect("subheading"+s)},model:{value:e.form.products_headings[s].subheading,callback:function(t){e.$set(e.form.products_headings[s],"subheading",t)},expression:"form.products_headings[index].subheading"}})],1)]),e._l(t.pItems,function(r,i,n){return[a("v-flex",{attrs:{xs6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"px-5",attrs:{autocomplete:"off",label:"Product","data-vv-name":"product_"+s+"_"+i,items:e.products},model:{value:e.form.products_headings[s].pItems[i].pid,callback:function(t){e.$set(e.form.products_headings[s].pItems[i],"pid",t)},expression:"form.products_headings[index].pItems[ii].pid"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Quantity","data-vv-name":"quantity"+s+"_"+i},model:{value:e.form.products_headings[s].pItems[i].quantity,callback:function(t){e.$set(e.form.products_headings[s].pItems[i],"quantity",t)},expression:"form.products_headings[index].pItems[ii].quantity"}})],1),a("v-flex",{attrs:{xs1:"",shrink:""}},[a("v-icon",{on:{click:function(t){return e.removeProduct(s,i)}}},[e._v(" delete ")])],1),i==t.pItems.length-1?a("v-flex",{attrs:{xs12:"","ml-5":""}},[a("v-btn",{attrs:{small:"",rounded:"",dark:"",fab:"",color:"red"},on:{click:function(t){return e.addPitem(s)}}},[a("v-icon",[e._v(" add ")])],1)],1):e._e()]})],2)}),1):e._e()],1)},ss=[],rs={name:"jobcard-form",mixins:[],props:{form:{type:Object,required:!0}},components:{DataList:ae},data(){return{products:[],refProducts:{},default:{client_id:0,project_id:0,person_id:0,location:"",revision:1,date:null,site_supervisor:"",autocad_engineer:"",plan_approved_by:"",labour_contractor:"",products_headings:[]},extras:{clients:{data:[],loading:!0,error:!1,loaded:!1},projects:{data:[],loading:!0,error:!1,loaded:!1},persons:{data:[],loading:!0,error:!1,loaded:!1},products_headings:{data:[],loading:!0,error:!1,loaded:!1}},baseUrl:"http://34.83.223.211/api/v1/"}},watch:{},mounted(){this.$emit("init"),this.$nextTick(()=>{this.watchClientId(),this.watchProjectId()})},async created(){let e,t,a=null;try{if(e=await axios.get(this.baseUrl+"clients",{withCredentials:!0,params:{}}),e){this.extras.clients.loading=!1,this.extras.clients.error=!1,this.extras.clients.data=this.generateItems(e.data.results,"client_id");try{if(t=await axios({methods:"GET",baseURL:this.$config.baseUrl,url:"projects",withCredentials:!0,params:{client_id:this.form.client_id}}),t){this.extras.projects.loading=!1,this.extras.projects.error=!1,this.extras.projects.data=this.generateItems(t.data.results,"project_id");try{a=await axios.get(this.baseUrl+"persons",{withCredentials:!0,params:{client_id:this.form.client_id}}),a&&(this.extras.persons.loading=!1,this.extras.persons.error=!1,this.extras.persons.data=this.generateItems(a.data.results,"person_id"))}catch(r){console.log("Persons -> "+r),r&&(this.extras.persons.error=!0)}}}catch(r){r&&(this.extras.projects.error=!0)}}}catch(r){r&&(extras.client.error=!0)}let s=await axios.get(this.baseUrl+"products",{withCredentials:!0});this.products=this.generateItems(s.data.results,"product_id"),s&&(this.refProducts=this.productsToObj(s.data.results))},methods:{removeHeading(e){this.form.products_headings.splice(e,1)},removeProduct(e,t){this.form.products_headings[e].pItems.splice(t,1)},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t},watchClientId(){this.$watch("form.client_id",function(e,t){e&&(this.form.project_id=null,this.form.person_id=null,axios.get(this.baseUrl+"projects",{withCredentials:!0,params:{client_id:this.form.client_id}}).then(e=>{this.extras["projects"].data=this.generateItems(e.data.results,"project_id"),this.extras["projects"].loading=!1,this.extras["projects"].error=!1}).catch(e=>{this.extras["projects"].error=!0,this.extras["projects"].loading=!1,this.extras["projects"].data=[]}),axios.get(this.baseUrl+"persons",{withCredentials:!0,params:{client_id:this.form.client_id}}).then(e=>{this.extras["persons"].data=this.generateItems(e.data.results,"person_id"),this.extras["persons"].loading=!1,this.extras["persons"].error=!1}).catch(e=>{this.extras["persons"].error=!0,this.extras["persons"].loading=!1,this.extras["persons"].data=[]}))})},watchProjectId(){this.$watch("form.project_id",function(e,t){})},newHeading(){let e={heading:"",subheading:"",pItems:[{pid:-1,quantity:0}]};this.form.products_headings.push(e)},addPitem(e){let t={pid:-1,quantity:0};this.form.products_headings[e].pItems.push(t)},formSubmit(){this.$validator.validateAll().then(e=>{})},validate(){return new Promise((e,t)=>{this.$validator.validateAll().then(t=>{e(this.form)}).catch(e=>{t(e)})})},cloneData(e,t,a){this.extras[t].data=this.generateItems(e.data.results,a),this.extras[t].loading=!0},cloneError(e){this.extras.clients.error=!0,this.extras.clients.loading=!1},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a}}},is=rs,ns=Object(c["a"])(is,as,ss,!1,null,null,null),os=ns.exports;m()(ns,{VAutocomplete:$e["a"],VBtn:h["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VTextField:ve["a"]});var ds=a("bc3a"),ls=a.n(ds);const cs={GET:0,POST:1,PATCH:2,DELETE:3};var us={name:"clientJobcards",components:{DataList:ae,DataModel:se,sad:aa,EditJobcard:os},props:{entity:{type:Object,required:!0}},data(){return{search:"",baseUrl:"http://34.83.223.211/api/v1/",headers:[{text:"Jobcard ID",value:"jobcard_id"},{text:"Project Name",value:"project_name"},{text:"Person name",value:"person_name"}],userMethod:0,dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,methodsEnums:cs,snackbar:{visible:!1,state:!1,message:""},endpoint:"jobcards",products:[],refProducts:{},editedItem:{jobcard_id:0,client_id:parent.client_id,project_id:0,person_id:0,location:"",revision:1,date:null,site_supervisor:"",autocad_engineer:"",plan_approved_by:"",labour_contractor:"",client_name:"",project_name:"",person_name:"",products_headings:[{pItems:[{pid:0,quantity:0}],heading:"",subheading:""}]}}},async created(){let e=await ls.a.get(this.baseUrl+"products");this.products=this.generateItems(e.data.results,"product_id"),e&&(this.refProducts=this.productsToObj(e.data.results)),this.editedItem.client_id=this.entity.client_id},methods:{generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t},dialogOpen(){this.dialog=!0,this.userMethod=this.methodsEnums.POST},dialogClose(){this.dialog=!1},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$refs.jc.$validator.validateAll().then(t=>{if(t){let t=dt.a.cloneDeep(this.editedItem);t.products_headings=JSON.stringify(t.products_headings),this.dl_key++,e.functions.create(t)}});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{if(t){let t=dt.a.cloneDeep(this.entity);t.products_headings=JSON.stringify(t.products_headings),this.dl_key++,e.functions.update(t)}});break;case this.methodsEnums.DELETE:e.functions.remove({jobcard_id:this.entity.jobcard_id}),this.dl_key++;break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},ms=us,vs=a("490a"),hs=Object(c["a"])(ms,es,ts,!1,null,null,null),ps=hs.exports;m()(hs,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VLayout:g["a"],VProgressCircular:vs["a"],VSnackbar:me["a"],VSpacer:C["a"]});var fs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"fill-height":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s())])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[[a("edit-project",{ref:"jc",attrs:{form:e.editedItem},on:{"update:form":function(t){e.editedItem=t}}})]],2):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(this.entity),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("v-flex",[a("data-list",{key:e.dl_key,attrs:{endpoint:"projects",entity:e.entity},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return[i?[a("v-flex",{attrs:{shrink:"","align-self-center":""}},[a("v-progress-circular",{attrs:{size:16,width:7,color:"red",indeterminate:""}})],1)]:[[[a("v-layout",{attrs:{wrap:"","fill-height":""}},[a("v-flex",{attrs:{xs12:"","py-1":""}},[a("v-layout",{attrs:{"justify-end":""}},[a("v-flex",{attrs:{shrink:"","px-2":""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticStyle:{"border-radius":"15px",padding:"2px",transform:"scale(1)","text-align":"center",border:"1px solid rgba(0,0,0,.1)",outline:"none"},attrs:{"single-line":"",type:"text",rounded:"",placeholder:"Search",outlined:"","prepend-inner-icon":"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),a("v-flex",{attrs:{small:"",shrink:""}},[a("v-btn",{attrs:{rounded:""},on:{click:e.dialogOpen}},[e._v(" Add ")])],1)],1)],1),!r&&s.results.length>0?a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{attrs:{dense:"",headers:e.headers,items:s.results,search:e.search},scopedSlots:e._u([{key:"item.project_id",fn:function(t){var a=t.item;return[e._v("\n                                                    "+e._s(e._f("project")(a.project_id))+"\n                                                ")]}},{key:"item.name",fn:function(t){var s=t.item;return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"project",params:{id:s.project_id}}}},[a("div",[e._v(" "+e._s(s.name))])])]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                                    edit\n                                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                                delete\n                                                ")])]}},{key:"item.dashboard",fn:function(t){var s=t.item;return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"projectWise",params:{id:s.project_id}}}},[a("div",[e._v(" Open ")])])]}}],null,!0)})],1):e._e()],1)]]]]}}])})],1)],1)},xs=[],gs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("data-list",{attrs:{endpoint:"clients"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return a("div",{},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Clients",error:r,"error-messages":r?r.statusText+". Try Reloading the page":"",loading:!r&&i?i:"",items:i||r?[]:e.generateItems(s.results,"client_id"),"data-vv-name":"client_names"},model:{value:e.form.client_id,callback:function(t){e.$set(e.form,"client_id",t)},expression:"form.client_id"}})],1)}}])})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:128",expression:"'required|min:6|max:128'"}],attrs:{label:"Site Address","data-vv-name":"site_address","error-messages":e.errors.collect("site_address")},model:{value:e.form.site_address,callback:function(t){e.$set(e.form,"site_address",t)},expression:"form.site_address"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Godown Name","data-vv-name":"godown_name","error-messages":e.errors.collect("godown_name")},model:{value:e.form.godown_name,callback:function(t){e.$set(e.form,"godown_name",t)},expression:"form.godown_name"}})],1)],1)},bs=[];const _s=a("bc3a");var ys={name:"project-form",mixins:[],components:{DataList:ae},props:{form:{type:Object,required:!0}},async created(){await _s.get(this.baseUrl+"clients",{withCredentials:!0})},mounted(){this.$emit("init")},data(){return{default:{name:"",client_id:-1,site_address:"",client_id:-1,godown_name:""},extras:{clients:{data:[],loading:!0,error:!1,loaded:!1}}}},methods:{generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a}}},ks=ys,Es=Object(c["a"])(ks,gs,bs,!1,null,null,null),Ss=Es.exports;m()(Es,{VFlex:p["a"],VLayout:g["a"],VSelect:ue["a"],VTextField:ve["a"],VTextarea:ye["a"]});const Ts={GET:0,POST:1,PATCH:2,DELETE:3};var Cs={name:"clientProjects",components:{DataList:ae,DataModel:se,sad:aa,EditProject:Ss},props:{entity:{type:Object,required:!0}},mounted(){this.editedItem.client_id=this.entity.client_id},data(){return{search:"",headers:[{text:"Project ID",value:"project_id"},{text:"Name",value:"name"},{text:"Site Address",value:"site_address"},{text:"Actions",value:"actions"},{text:"Dashboard",value:"dashboard"}],snackbar:{visible:!1,state:!1,message:""},dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,endpoint:"projects",methodsEnums:Ts,editedItem:{name:"",site_address:"",client_id:-1},userMethod:""}},methods:{actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogOpen(){this.dialog=!0,this.userMethod=this.methodsEnums.POST},dialogClose(){this.dialog=!1},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$refs.jc.$validator.validateAll().then(t=>{if(t){let t=_.cloneDeep(this.editedItem);e.functions.create(t),this.dl_key++}});break;case this.methodsEnums.PATCH:this.$refs.jc.$validator.validateAll().then(t=>{if(t){let t=_.cloneDeep(this.editedItem);e.functions.update(t),this.dl_key++}});break;case this.methodsEnums.DELETE:e.functions.remove({project_id:this.editedItem.project_id}),this.dl_key++;break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t}}},Is=Cs,ws=Object(c["a"])(Is,fs,xs,!1,null,null,null),js=ws.exports;m()(ws,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VProgressCircular:vs["a"],VSnackbar:me["a"],VSpacer:C["a"]});var $s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{"fill-height":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s())])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[[a("edit-person",{ref:"jc",attrs:{form:e.editedItem},on:{"update:form":function(t){e.editedItem=t}}})]],2):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(this.entity),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("v-flex",[a("data-list",{key:e.dl_key,attrs:{endpoint:"persons",entity:e.entity},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return[i?[a("v-flex",{attrs:{shrink:"","align-self-center":""}},[a("v-progress-circular",{attrs:{size:16,width:7,color:"red",indeterminate:""}})],1)]:[[[a("v-layout",{attrs:{wrap:"","fill-height":""}},[a("v-flex",{attrs:{xs12:"","py-1":""}},[a("v-layout",{attrs:{"justify-end":""}},[a("v-flex",{attrs:{shrink:"","px-2":""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticStyle:{"border-radius":"15px",padding:"2px",transform:"scale(1)","text-align":"center",border:"1px solid rgba(0,0,0,.1)",outline:"none"},attrs:{"single-line":"",type:"text",rounded:"",placeholder:"Search",outlined:"","prepend-inner-icon":"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),a("v-flex",{attrs:{small:"",shrink:""}},[a("v-btn",{attrs:{rounded:""},on:{click:e.dialogOpen}},[e._v(" Add ")])],1)],1)],1),!r&&s.results.length>0?a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{attrs:{dense:"",headers:e.headers,items:s.results.length>0?s.results:[],search:e.search},scopedSlots:e._u([{key:"item.person_id",fn:function(t){var a=t.item;return[e._v("\n                                                "+e._s(e._f("person")(a.person_id))+"\n                                            ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                                    edit\n                                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                                delete\n                                                ")])]}}],null,!0)})],1):e._e()],1)]],void 0]]}}])})],1)],1)},Ps=[],Ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"email|min:3",expression:"'email|min:3'"}],attrs:{label:"Email","data-vv-name":"email","error-messages":e.errors.collect("email")},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],attrs:{label:"Number","data-vv-name":"number","error-messages":e.errors.collect("number")},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{label:"designation","data-vv-name":"designation","error-messages":e.errors.collect("designation")},model:{value:e.form.designation,callback:function(t){e.$set(e.form,"designation",t)},expression:"form.designation"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{loading:e.extras.clients.loading,items:e.extras.clients.data,label:"Client ID","data-vv-name":"client_id","error-messages":e.errors.collect("client_id")},model:{value:e.form.client_id,callback:function(t){e.$set(e.form,"client_id",t)},expression:"form.client_id"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{loading:e.extras.projects.loading,items:e.extras.projects.data,label:"Project ID","data-vv-name":"project_id","error-messages":e.errors.collect("project_id")},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}})],1)],1)},Vs=[];const Os=a("bc3a");var As={name:"project-form",mixins:[],components:{DataList:ae},props:{form:{type:Object,required:!0}},async mounted(){let e=await Os.get(this.$config.baseUrl+"clients",{params:{}});e.data.results&&(this.extras.clients.data=this.generateItems(e.data.results,"client_id"));let t=await Os({method:"GET",baseURL:this.$config.baseUrl,url:"projects",params:{client_id:this.form.client_id}});t.data.results&&(this.extras.projects.data=this.generateItems(t.data.results,"project_id")),this.$emit("init")},data(){return{default:{name:"",client_id:-1,email:"",designation:"",person_id:-1},extras:{clients:{loading:!0,error:!1,data:[]},projects:{loading:!0,error:!1,data:[]}}}},methods:{generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},async getProjects(){let e=await Os({method:"GET",baseURL:this.$config.baseUrl,url:"projects",params:{client_id:this.form.client_id}});e.data.results&&(this.extras.projects.data=this.generateItems(e.data.results,"project_id"))}}},qs=As,Ns=Object(c["a"])(qs,Ds,Vs,!1,null,null,null),Ls=Ns.exports;m()(Ns,{VFlex:p["a"],VLayout:g["a"],VSelect:ue["a"],VTextField:ve["a"]});const Ms={GET:0,POST:1,PATCH:2,DELETE:3};var Hs={name:"clientProjects",components:{DataList:ae,DataModel:se,sad:aa,EditPerson:Ls},props:{entity:{type:Object,required:!0}},mounted(){this.editedItem.client_id=this.entity.client_id},data(){return{search:"",headers:[{text:"Person ID",value:"person_id"},{text:"Name",value:"name"},{text:"Number",value:"number"},{text:"Email",value:"email"},{text:"Designation",value:"designation"},{text:"Client Name",value:"client_name"},{text:"Project Name",value:"project_name"},{text:"Actions",value:"actions"}],snackbar:{visible:!1,state:!1,message:""},dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,endpoint:"persons",methodsEnums:Ms,editedItem:{},userMethod:""}},methods:{actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogOpen(){this.dialog=!0,this.userMethod=this.methodsEnums.POST},dialogClose(){this.dialog=!1},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$refs.jc.$validator.validateAll().then(t=>{if(t){let t=_.cloneDeep(this.editedItem);e.functions.create(t),this.dl_key++}});break;case this.methodsEnums.PATCH:this.$refs.jc.$validator.validateAll().then(t=>{if(t){let t=_.cloneDeep(this.editedItem);e.functions.update(t),this.dl_key++}});break;case this.methodsEnums.DELETE:e.functions.remove({person_id:this.editedItem.person_id}),this.dl_key++;break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t}}},Us=Hs,Bs=Object(c["a"])(Us,$s,Ps,!1,null,null,null),Rs=Bs.exports;m()(Bs,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VProgressCircular:vs["a"],VSnackbar:me["a"],VSpacer:C["a"]});var Ws={extends:ee,components:{clientDetails:Xa,DataList:ae,DataModel:se,clientProjects:js,clientJobcards:ps,clientPersons:Rs,notFound:za},data(){return{tab:null,state:!0,local:{client_id:0,person_id:0,project_id:0}}},methods:{test(){}},mounted(){}},Fs=Ws,Gs=(a("e4fb"),a("71a3")),zs=a("c671"),Js=a("fe57"),Ys=a("aac8"),Qs=Object(c["a"])(Fs,Ha,Ua,!1,null,null,null),Ks=Qs.exports;m()(Qs,{VFlex:p["a"],VLayout:g["a"],VProgressCircular:vs["a"],VTab:Gs["a"],VTabItem:zs["a"],VTabs:Js["a"],VTabsItems:Ys["a"]});var Zs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{staticClass:"white elevation-0 main ",staticStyle:{"border-radius":"25px","text-align":"center","margin-left":"0px !important","margin-right":"0px !important"},attrs:{"pa-0":"",row:"",wrap:"","align-start":"","justify-center":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[[a("edit-jobcard",{attrs:{form:e.entity},on:{"update:form":function(t){e.entity=t}}})]],2):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(this.entity),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{staticClass:"btns",attrs:{"justify-end":""}},[a("v-btn",{attrs:{text:"",rounded:""},on:{click:function(t){return e.print()}}},[e._v(" PRINT ")]),a("v-btn",{attrs:{text:"",rounded:""},on:{click:function(t){e.userMethod=e.methodsEnums.PATCH,e.dialog=!0}}},[e._v(" EDIT ")]),a("v-btn",{attrs:{text:"",rounded:""},on:{click:function(t){e.userMethod=e.methodsEnums.DELETE,e.dialog=!0}}},[e._v(" DELETE ")])],1)],1),a("v-flex",{staticClass:"printable",attrs:{xs12:""}},[a("v-layout",{attrs:{"justify-center":"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-layout",{staticClass:"jobcard-data-fields",attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{staticStyle:{border:"1px solid #000","margin-left":"-1px"},attrs:{xs6:"",md5:""}},[a("v-layout",[a("img",{staticStyle:{width:"240px"},attrs:{src:e.logo}})])],1),a("v-flex",{staticStyle:{border:"1px solid #000"},attrs:{shrink:"",xs6:"",md5:"","pa-5":""}},[a("v-layout",{attrs:{"justify-end":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])])],1),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Jobcard ID : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("jobcard")(e.entity.jobcard_id))+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Client Name : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.client_name)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Project Name : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.project_name)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Location : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.location)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Revision : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.revision)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Date : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.date)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Tfpc's Site supervisor : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.site_supervisor)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Location : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.location)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Autocad Engineer : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.autocad_engineer)+" ")])])]),a("v-flex",{attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"body-1"},[e._v(" Plan Approved By : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.plan_approved_by)+" ")])])]),a("v-flex",{attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"body-1"},[e._v(" Labour Contractor : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.labour_contractor)+" ")])])]),a("v-flex",{attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"body-1",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" Products ")])]),a("v-flex",{attrs:{xs12:"",md10:"","pa-2":"","my-2":""}},e._l(e.entity.products_headings,function(t,s){return a("v-layout",{key:s,staticClass:"perProduct",attrs:{wrap:"","mt-2":"","mb-2":""}},[a("v-flex",{staticStyle:{border:"1px solid #000",padding:"3px 0px 3px 14px","margin-left":"-1px","margin-top":"-1px"},attrs:{xs12:"",grow:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" "+e._s(t.heading)+"    "),a("span",{staticClass:"caption"},[e._v(" "+e._s(t.subheading)+" ")])])]),a("v-flex",{attrs:{"my-0":""}},[a("v-simple-table",{staticClass:"py-0 ptable",attrs:{dense:""}},[a("thead",[a("th",[e._v(" Name ")]),a("th",[e._v(" Quantity ")]),a("th",{staticClass:"toHide"},[e._v(" Site Stock ")]),a("th",{staticClass:"toHide"},[e._v(" Global Stock ")])]),a("tbody",e._l(t.pItems,function(t){return a("tr",[a("td",[e._v(" "+e._s(e.refProducts[t.pid]?e.refProducts[t.pid].name:"Null")+" ")]),a("td",[e._v(" "+e._s(t.quantity)+" ")]),a("td",{staticClass:"toHide"},[e._v(" "+e._s(t.site_stock)+" ")]),a("td",{staticClass:"toHide"},[e._v(" "+e._s(t.global_stock)+" ")])])}),0)])],1)],1)}),1)],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"","my-2":"","px-0":""}})],1)},Xs=[],er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",e._b({attrs:{wrap:""}},"v-layout",e.$attrs,!1),[a("v-flex",{attrs:{xs12:"",sm12:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Clients",loading:!(e.extras.clients.error||!e.extras.clients.loading)&&e.extras.clients.loading,items:e.extras.clients.loading||e.extras.clients.error?[]:e.extras.clients.data,"data-vv-name":"client_names","error-messages":e.errors.collect("client_names"),type:"search"},model:{value:e.form.client_id,callback:function(t){e.$set(e.form,"client_id",t)},expression:"form.client_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Projects",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.extras.projects.data,"data-vv-name":"project_names","error-messages":e.errors.collect("project_names"),type:"search"},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Persons",loading:!(e.extras.persons.error||!e.extras.persons.loading)&&e.extras.persons.loading,items:e.extras.persons.loading||e.extras.persons.error?[]:e.extras.persons.data,"data-vv-name":"person_names","error-messages":e.errors.collect("person_names")},model:{value:e.form.person_id,callback:function(t){e.$set(e.form,"person_id",t)},expression:"form.person_id"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:128",expression:"'required|min:3|max:128'"}],attrs:{label:"Location","data-vv-name":"location","error-messages":e.errors.collect("location")},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"numeric|required|min:1",expression:"'numeric|required|min:1'"}],attrs:{label:"Revision","data-vv-name":"revision","error-messages":e.errors.collect("revision")},model:{value:e.form.revision,callback:function(t){e.$set(e.form,"revision",t)},expression:"form.revision"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Tfpc's Site Supervisor","data-vv-name":"site_supervisor","error-messages":e.errors.collect("site_supervisor")},model:{value:e.form.site_supervisor,callback:function(t){e.$set(e.form,"site_supervisor",t)},expression:"form.site_supervisor"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Autocad Engineer","data-vv-name":"autocad_engineer","error-messages":e.errors.collect("autocad_engineer")},model:{value:e.form.autocad_engineer,callback:function(t){e.$set(e.form,"autocad_engineer",t)},expression:"form.autocad_engineer"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Plan Approved By","data-vv-name":"plan_approved_by","error-messages":e.errors.collect("plan_approved_by")},model:{value:e.form.plan_approved_by,callback:function(t){e.$set(e.form,"plan_approved_by",t)},expression:"form.plan_approved_by"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Labour Contractor","data-vv-name":"labour_contractor","error-messages":e.errors.collect("labour_contractor")},model:{value:e.form.labour_contractor,callback:function(t){e.$set(e.form,"labour_contractor",t)},expression:"form.labour_contractor"}})],1),a("v-flex",{attrs:{shrink:"","align-self-end":""}},[a("v-btn",{on:{click:e.newHeading}},[e._v(" Add Product ")])],1),e.form.products_headings.length>0?a("v-flex",{attrs:{xs12:""}},e._l(e.form.products_headings,function(t,s){return a("v-layout",{staticStyle:{"border-radius":"15px"},attrs:{wrap:"","my-0":"","pa-2":""}},[a("v-flex",{attrs:{xs12:""}},[a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Heading","data-vv-name":"heading_"+s,"error-messages":e.errors.collect("heading_"+s)},model:{value:e.form.products_headings[s].heading,callback:function(t){e.$set(e.form.products_headings[s],"heading",t)},expression:"form.products_headings[index].heading"}})],1)]),a("v-flex",{attrs:{xs12:""}},[a("h1",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Sub-heading","data-vv-name":"subheading"+s,"error-messages":e.errors.collect("subheading"+s)},model:{value:e.form.products_headings[s].subheading,callback:function(t){e.$set(e.form.products_headings[s],"subheading",t)},expression:"form.products_headings[index].subheading"}})],1)]),e._l(t.pItems,function(r,i,n){return[a("v-flex",{attrs:{xs6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"px-5",attrs:{autocomplete:"off",label:"Product","data-vv-name":"product_"+s+"_"+i,items:e.products},model:{value:e.form.products_headings[s].pItems[i].pid,callback:function(t){e.$set(e.form.products_headings[s].pItems[i],"pid",t)},expression:"form.products_headings[index].pItems[ii].pid"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Quantity","data-vv-name":"quantity"+s+"_"+i},model:{value:e.form.products_headings[s].pItems[i].quantity,callback:function(t){e.$set(e.form.products_headings[s].pItems[i],"quantity",t)},expression:"form.products_headings[index].pItems[ii].quantity"}})],1),i==t.pItems.length-1?a("v-flex",{attrs:{xs12:"","ml-5":""}},[a("v-btn",{attrs:{small:"",rounded:"",dark:"",fab:"",color:"red"},on:{click:function(t){return e.addPitem(s)}}},[a("v-icon",[e._v(" add ")])],1)],1):e._e()]})],2)}),1):e._e()],1)},tr=[],ar={name:"jobcard-form",mixins:[],props:{form:{type:Object,required:!0}},components:{DataList:ae},data(){return{products:[],refProducts:{},default:{client_id:0,project_id:0,person_id:0,location:"",revision:1,date:null,site_supervisor:"",autocad_engineer:"",plan_approved_by:"",labour_contractor:"",products_headings:[]},extras:{clients:{data:[],loading:!0,error:!1,loaded:!1},projects:{data:[],loading:!0,error:!1,loaded:!1},persons:{data:[],loading:!0,error:!1,loaded:!1},products_headings:{data:[],loading:!0,error:!1,loaded:!1}},baseUrl:"http://34.83.223.211/api/v1/"}},watch:{},mounted(){this.$emit("init"),this.$nextTick(()=>{this.watchClientId(),this.watchProjectId()})},async created(){let e,t,a=null;try{if(e=await axios.get(this.baseUrl+"clients",{withCredentials:!0,params:{}}),e){this.extras.clients.loading=!1,this.extras.clients.error=!1,this.extras.clients.data=this.generateItems(e.data.results,"client_id");try{if(t=await axios({methods:"GET",baseURL:this.$config.baseUrl,withCredentials:!0,url:"projects",params:{client_id:this.form.client_id}}),t){this.extras.projects.loading=!1,this.extras.projects.error=!1,this.extras.projects.data=this.generateItems(t.data.results,"project_id");try{a=await axios.get(this.baseUrl+"persons",{withCredentials:!0,params:{project_id:this.form.project_id}}),a&&(this.extras.persons.loading=!1,this.extras.persons.error=!1,this.extras.persons.data=this.generateItems(a.data.results,"person_id"))}catch(r){console.log("Persons -> "+r),r&&(this.extras.persons.error=!0)}}}catch(r){r&&(this.extras.projects.error=!0)}}}catch(r){r&&(extras.client.error=!0)}let s=await axios.get(this.baseUrl+"products",{withCredentials:!0});this.products=this.generateItems(s.data.results,"product_id"),s&&(this.refProducts=this.productsToObj(s.data.results))},methods:{productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t},watchClientId(){this.$watch("form.client_id",function(e,t){e&&(this.form.project_id=null,this.form.person_id=null,axios.get(this.baseUrl+"projects",{withCredentials:!0,params:{client_id:this.form.client_id}}).then(e=>{this.extras["projects"].data=this.generateItems(e.data.results,"project_id"),this.extras["projects"].loading=!1,this.extras["projects"].error=!1}).catch(e=>{this.extras["projects"].error=!0,this.extras["projects"].loading=!1,this.extras["projects"].data=[]}),axios.get(this.baseUrl+"persons",{withCredentials:!0,params:{client_id:this.form.client_id}}).then(e=>{this.extras["persons"].data=this.generateItems(e.data.results,"person_id"),this.extras["persons"].loading=!1,this.extras["persons"].error=!1}).catch(e=>{this.extras["persons"].error=!0,this.extras["persons"].loading=!1,this.extras["persons"].data=[]}))})},watchProjectId(){this.$watch("form.project_id",function(e,t){})},newHeading(){let e={heading:"",subheading:"",pItems:[{pid:-1,quantity:0}]};this.form.products_headings.push(e)},addPitem(e){let t={pid:-1,quantity:0};this.form.products_headings[e].pItems.push(t)},formSubmit(){this.$validator.validateAll().then(e=>{})},validate(){return new Promise((e,t)=>{this.$validator.validateAll().then(t=>{e(this.form)}).catch(e=>{t(e)})})},cloneData(e,t,a){this.extras[t].data=this.generateItems(e.data.results,a),this.extras[t].loading=!0},cloneError(e){this.extras.clients.error=!0,this.extras.clients.loading=!1},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a}}},sr=ar,rr=Object(c["a"])(sr,er,tr,!1,null,null,null),ir=rr.exports;m()(rr,{VAutocomplete:$e["a"],VBtn:h["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VTextField:ve["a"]});const nr={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(nr);var or={extends:ee,components:{DataList:ae,DataModel:se,EditJobcard:ir},props:{},data(){return{baseUrl:"http://34.83.223.211/api/v1/",logo:a("5b62"),products:[],refProducts:{},style:{parent:{backgrosund:"#F4F5F6",bordesrRadius:"15px",padding:"0px"},heading:{opacity:".7"},subheading:{opacity:".5"}},entity:{},backupEntity:{},state:{error:!1},endpoint:"jobcards",userMethod:0,dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,methodsEnums:nr,snackbar:{visible:!1,state:!1,message:""}}},computed:{formTitle(){}},async created(){try{let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"jobcards/stock",params:{jobcard_id:this.$route.params.id}});e&&(this.entity=Object.assign({},e.data.results[0]),this.entity.product_headings=JSON.parse(this.entity.product_headings))}catch(t){t&&(this.state.error=!0)}let e=await axios.get(this.baseUrl+"products");this.products=this.generateItems(e.data.results,"product_id"),e&&(this.refProducts=this.productsToObj(e.data.results))},mounted(){this.entity.project_id=Number(this.entity.project_id),this.entity.person_id=Number(this.entity.person_id)},methods:{print(){window.print()},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t},dialogOpen(){this.dialog=!0,this.userMethod=this.methodsEnums.PATCH},dialogClose(){this.dialog=!1},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{t&&e.functions.create(this.entity)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{if(t){let t=dt.a.cloneDeep(this.entity);t.products_headings=JSON.stringify(t.products_headings),e.functions.update(t)}});break;case this.methodsEnums.DELETE:e.functions.remove({jobcard_id:this.entity.jobcard_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},dr=or,lr=(a("5304"),a("1f4f")),cr=Object(c["a"])(dr,Zs,Xs,!1,null,null,null),ur=cr.exports;m()(cr,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDialog:ce["a"],VFlex:p["a"],VLayout:g["a"],VSimpleTable:lr["a"],VSnackbar:me["a"],VSpacer:C["a"]});var mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s())])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{label:"Stock","data-vv-name":"stock","error-messages":e.errors.collect("stock")},model:{value:e.editedItem.stock,callback:function(t){e.$set(e.editedItem,"stock",t)},expression:"editedItem.stock"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:0|decimal",expression:"'required|min:0|decimal'"}],attrs:{label:"Rate","data-vv-name":"rate","error-messages":e.errors.collect("rate")},model:{value:e.editedItem.avg_rate,callback:function(t){e.$set(e.editedItem,"avg_rate",t)},expression:"editedItem.avg_rate"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Project",loading:!(e.extras.projects.error||!e.extras.projects.loading)&&e.extras.projects.loading,items:e.extras.projects.loading||e.extras.projects.error?[]:e.extras.projects.data,"data-vv-name":"project","error-messages":e.errors.collect("project"),type:"search"},model:{value:e.editedItem.project_id,callback:function(t){e.$set(e.editedItem,"project_id",t)},expression:"editedItem.project_id"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{autocomplete:"off",label:"Products","hide-selected":"",items:e.extras.products.data,"data-vv-name":"product_name","error-messages":e.errors.collect("product_name_"),type:"search"},model:{value:e.editedItem.product_id,callback:function(t){e.$set(e.editedItem,"product_id",t)},expression:"editedItem.product_id"}})],1)],1):e._e()],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(this.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e.userMethod==e.methodsEnums.APPROVE?a("v-layout",{attrs:{wrap:""}},[a("h1",{staticClass:"display-1"},[e._v(" Are you sure, you want to Approve this ? ")]),e._l(Object.values(this.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2",staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"}},[e._v(" \n                                "+e._s(t)+" \n                                \n                            ")])})],2):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.approve,r=t.remove,i=(t.data,t.loading),n=t.create,o=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:i,text:""},on:{click:function(t){return e.dialogSave({functions:{create:n,approve:s,remove:r,update:o}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint+"/product/"+e.$route.params.id},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=(t.error,t.loading);return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:r,headers:e.headers,items:s?s.result:[],options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.inventory_id",fn:function(t){var a=t.item;return[e._v("\n                                    "+e._s(e._f("inventory")(a.inventory_id))+"\n                            ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}}],null,!0)})],1)}}])})],1)],1)},vr=[];const hr={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(hr);var pr={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"inventory",extras:{products:{data:[],loading:!0,error:!1,loaded:!1},projects:{loading:!0,error:!1,data:[]}},search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Inventory ID",value:"inventory_id"},{text:"Product name",value:"product_name"},{text:"Type",value:"inventory_type"},{text:"Project Name",value:"project_name"},{text:"Stock",value:"stock"},{text:"Avg Rate",value:"avg_rate"},{text:"Actions",value:"actions"}],enums:{type:["purchase","selling","trade"]},editedIndex:-1,editedItem:{},defaultItem:{project_id:null,product_id:null,stock:null,avg_rate:null,type:1},snackbar:{visible:!1,state:!1,message:""},methodsEnums:hr,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){},async created(){this.getProjects(),this.getProducts()},methods:{async getProjects(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"projects",params:{}});e.data.results&&(this.extras.projects.loading=!1,this.extras.projects.data=this.generateItems(e.data.results,"project_id"))},async getProducts(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"products",params:{}});e.data.results&&(this.extras.products.loading=!1,this.extras.products.data=this.generateItems(e.data.results,"product_id"))},async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e,t){let a=[];return a.push({text:"none",value:null}),e.forEach((e,s)=>{a.push({text:e.name,value:e[t]})}),a},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.editedItem.unit_id=String(e.unit_id),this.editedItem.type=String(e.type),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{t&&e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{t&&e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({inventory_id:this.editedItem.inventory_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},fr=pr,xr=(a("4b7b"),Object(c["a"])(fr,mr,vr,!1,null,null,null)),gr=xr.exports;m()(xr,{VAutocomplete:$e["a"],VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSpacer:C["a"],VTextField:ve["a"]});var br=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{staticClass:"white elevation-0 main ",staticStyle:{"border-radius":"25px","text-align":"center","margin-left":"0px !important","margin-right":"0px !important"},attrs:{"pa-5":"",row:"","align-start":"","justify-center":"",wrap:""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-dialog",{key:e.dialog_key,attrs:{"max-width":"80%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline "},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[[a("edit-po",{ref:"poRef",attrs:{form:e.entity,products:e.products,refProducts:e.refProducts},on:{"update:form":function(t){e.entity=t}}})]],2):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(this.entity),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" \n                            ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:e.endpoint},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("v-flex",{attrs:{xs12:""}}),a("v-flex",{staticClass:"printable",attrs:{xs12:""}},[a("v-layout",{staticClass:"toHide",attrs:{"justify-end":""}},[a("v-btn",{attrs:{text:"",rounded:""},on:{click:function(t){return e.print()}}},[e._v(" PRINT ")]),a("v-btn",{attrs:{text:"",rounded:""},on:{click:function(t){e.userMethod=e.methodsEnums.PATCH,e.dialog=!0}}},[e._v(" EDIT ")]),a("v-btn",{attrs:{text:"",rounded:""},on:{click:function(t){e.userMethod=e.methodsEnums.DELETE,e.dialog=!0}}},[e._v(" DELETE ")])],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-layout",{staticClass:"jobcard-data-fields ",attrs:{fluid:"",row:"",wrap:"","justify-center":""}},[a("v-flex",{staticStyle:{border:"1px solid #000","margin-left":"-1px"},attrs:{xs6:"",md5:""}},[a("v-layout",[a("img",{staticStyle:{width:"240px",height:"70px"},attrs:{src:e.logo}})])],1),a("v-flex",{attrs:{xs6:"",md5:"","pa-5":""}},[a("h1",{staticClass:"title",staticStyle:{opacity:".6","text-align":"right"}},[e._v(" Purchase Order ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{staticClass:"noBorders",attrs:{xs6:"",md5:"","justify-space-around":""}},[a("h1",{staticClass:"title"},[e._v(" Purchase Order ID : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("po")(e.entity.po_id))+", ")])])]),a("v-flex",{staticClass:"noBorders",attrs:{xs6:"",md5:"",shrink:""}},[a("v-layout",{attrs:{"justify-end":""}},[a("h1",{staticClass:"title"},[e._v(" Date : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("formatDate")(e.entity.date))+" ")])])])],1),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"headline innerValue"},[e._v(" "+e._s(e.entity.vendor_name)+", ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs6:"",md5:""}},[a("h1",{staticClass:"subtitle-1 innerValue"},[e._v(" "+e._s(e.entity.vendor_address)+". ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{staticClass:"noBorders",attrs:{xs6:"",md5:"","justify-space-around":""}},[a("h1",{staticClass:"title"},[e._v(" Ref : "+e._s(e._f("uppercase")(e.entity.ref))+"  ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1 innerValue"},[e._v(" \n                                Dear Sir,  "),a("br"),e._v("\n                                We are pleased to place a purchase order with your company, as follows    \n                            ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{attrs:{xs12:"",md10:"","pa-0":"","my-0":"",stsyle:e.style.parent}},[a("v-data-table",{attrs:{dense:"",items:e.entity.products,headers:e.headers,"disable-pagination":"","disable-sort":"","hide-default-footer":""},scopedSlots:e._u([{key:"item.amount",fn:function(t){var a=t.item;return[e._v("\n                            "+e._s(e._f("currency")(e.generateGst(e.$Big(a.avg_rate).times(a.quantity),a.igst,a.cgst,a.sgst),""))+"\n                        ")]}}])})],1),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"title",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" Terms Of Service ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Payment : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("capitalize")(e.entity.tac.payment))+" ")])])]),a("v-flex",{staticClass:"noBorders toHide",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Remarks : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("capitalize")(e.entity.tac.remarks))+" ")])])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Tax Type : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("capitalize")(e.entity.tac.tax_type))+" ")])])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Warranty : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("capitalize")(e.entity.tac.warranty))+" ")])])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Tax Price : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e.entity.tac.tax_price)+" ")])])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Freight Tax : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("capitalize")(e.entity.tac.freight_tax))+" ")])])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1"},[e._v(" Delivery Period : "),a("span",{staticClass:"innerValue"},[e._v(" "+e._s(e._f("capitalize")(e.entity.tac.delivery_period))+" ")])])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-divider"),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("br"),a("v-divider")],1),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"title",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" Billing Address : ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" THE FIRE PROTECTION COMPANY ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" B-601, North Lanes shopping complex, Opp Vartak College, Vasai West, Palghar - 401 202, India. ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" GST NO : 27BBKPG9094E1ZC ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" PAN NO : BBKPG9094E ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("v-divider"),a("br")],1),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"title",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" Declaration: ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"subtitle-1",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" Kindly acknowledge the receipt of this purchase order duty signed and stamped as token of your unconditional acceptance ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"title",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" Signature: ")])]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[e._v("  ")]),a("v-flex",{staticClass:"noBorders",attrs:{xs12:"",md10:""}},[a("h1",{staticClass:"title",staticStyle:{opacity:"1","text-align":"left"}},[e._v(" Authorized Signatory ")])])],1)],1)],1)},_r=[];const yr={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(yr);var kr={extends:ee,components:{DataList:ae,DataModel:se,EditPo:nt},props:{},data(){return{num:1,logo:a("5b62"),style:{parent:{background:"#F4F5F6",borderRadius:"15px"},heading:{opacity:".7"},subheading:{opacity:".5"}},headers:[{text:"Sr No.",value:"srno",align:"center"},{text:"Product Name",value:"product_name"},{text:"Delivery Address",value:"site_address",width:"130px"},{text:"Quantity",value:"quantity",align:"center"},{text:"Rate",value:"avg_rate",align:"center"},{text:"Unit",value:"name",align:"center"},{text:"IGST",value:"igst",align:"center"},{text:"CGST",value:"cgst",align:"center"},{text:"SGST",value:"sgst",align:"center"},{text:"Amount",value:"amount",align:"center"}],entity:{},state:{error:!1},products:[],refProducts:[],endpoint:"purchase-orders",userMethod:0,dialog:!1,dialog_key:555,dl_key:55,dialog_loading:!1,methodsEnums:yr,snackbar:{visible:!1,state:!1,message:""},baseUrl:"http://34.83.223.211/api/v1/"}},computed:{formTitle(){}},async created(){try{let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"purchase-orders",params:{po_id:this.$route.params.id},withCredentials:!0});e&&(this.entity=Object.assign({},e.data.result[0]),this.entity.products=JSON.parse(this.entity.products),this.entity.products||(this.entity.products=[]))}catch(t){t&&(this.state.error=!0)}let e=await axios.get(this.baseUrl+"products",{withCredentials:!0});this.products=this.generateItems(e.data.results,"product_id"),e&&(this.refProducts=this.productsToObj(e.data.results))},mounted(){this.entity.project_id=Number(this.entity.project_id),this.entity.person_id=Number(this.entity.person_id)},methods:{generateGst(e,t,a,s){let r=this.$Big(0);return t>0&&(r=r.plus(t)),a>0&&(r=r.plus(a)),s>0&&(r=r.plus(s)),r.eq(0)?e:this.$Big(e).times(r).div(100).plus(this.$Big(e))},print(){window.print()},productsToObj(e){let t={};return Object.keys(e).forEach((a,s,r)=>{t[Number(e[a].product_id)]=e[a]}),t},generateItems(e,t){let a=[];return e.forEach((e,s)=>{a.push({text:e.name,value:Number(e[t])})}),a},dialogOpen(){this.dialog=!0,this.userMethod=this.methodsEnums.PATCH},dialogClose(){this.dialog=!1},dialogSave(e){let t=dt.a.cloneDeep(this.entity);switch(t.products=JSON.stringify(t.products),void 0!=t.tac.freight_tax&&""!=t.tac.freight_tax&&null!=t.tac.freight_tax||delete t.tac.freight_tax,t.tac=JSON.stringify(t.tac),this.userMethod){case this.methodsEnums.POST:this.$refs.poRef.$validator.validateAll().then(a=>{a&&e.functions.create(t)});break;case this.methodsEnums.PATCH:this.$refs.poRef.$validator.validateAll().then(a=>{a&&e.functions.update(t)});break;case this.methodsEnums.DELETE:e.functions.remove({po_id:this.entity.po_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose(),this.reloadData()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},async reloadData(){let e=await axios({method:"GET",baseURL:this.$config.baseUrl,url:"purchase-orders",params:{po_id:this.$route.params.id},withCredentials:!0});e&&(this.entity=Object.assign({},e.data.result[0]),this.entity.products=JSON.parse(this.entity.products))},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Er=kr,Sr=(a("bb52"),a("ce7e")),Tr=Object(c["a"])(Er,br,_r,!1,null,null,null),Cr=Tr.exports;m()(Tr,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VDivider:Sr["a"],VFlex:p["a"],VLayout:g["a"],VSnackbar:me["a"],VSpacer:C["a"]});var Ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-layout",{attrs:{"pa-4":"","justify-end":""}},[a("v-flex",[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" Product Wise ")])]),a("v-flex",{attrs:{lg6:"",shrink:""}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{loading:s,headers:e.headers,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.status",fn:function(t){var s=t.item;return[s.status>0?[a("div",{staticStyle:{color:"green"}},[a("span",{staticClass:"body-2"},[e._v(e._s(e._f("currency")(s.status,"")))]),a("v-icon",{staticClass:"ml-1",staticStyle:{transform:"rotate(-90deg)"},attrs:{color:"green",size:"20px"}},[e._v(" play_arrow ")])],1)]:[a("div",{staticStyle:{color:"red"}},[a("span",{staticClass:"body-2"},[e._v(e._s(e._f("currency")(s.status,"")))]),a("v-icon",{staticClass:"ml-1",staticStyle:{transform:"rotate(90deg)"},attrs:{color:"red",size:"20px"}},[e._v(" play_arrow ")])],1)]]}},{key:"item.jobcard_quantity",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("currency")(a.jobcard_quantity,""))+"\n                            ")]}},{key:"item.avg_rate",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("currency")(a.avg_rate,""))+"\n                            ")]}},{key:"item.stock",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("currency")(a.stock,""))+"\n                            ")]}},{key:"item.cost",fn:function(t){var s=t.item;return[s.cost?a("div",{staticStyle:{background:"#dfecf3",color:"#356179",padding:"3px 6px 3px 6px","border-radius":"6px",display:"inline"}},[e._v("\n                                    "+e._s(e._f("currency")(s.cost,""))+"\n                                ")]):e._e()]}}],null,!0)})],1)}}])})],1)],1)},wr=[],jr={extends:ee,components:{DataList:ae,DataModel:se},data(){return{endpoint:"inventory/productWise",search:"",dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Product Name",value:"product_name"},{text:"Stock",value:"stock"},{text:"Jobcard Requirement",value:"jobcard_quantity"},{text:"Status",value:"status"}],editedIndex:-1,editedItem:{godown_id:0,name:"",address:"",client_name:"",client_id:null},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0},snackbar:{visible:!1,state:!1,message:""}}},computed:{},watch:{dialog(e){e||this.dialogClose()}},async mounted(){},methods:{listSuccess(e){this.items=e.data.results},listError(e){this.items=[]}}},$r=jr,Pr=(a("7ee0"),Object(c["a"])($r,Ir,wr,!1,null,null,null)),Dr=Pr.exports;m()(Pr,{VDataTable:le["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VTextField:ve["a"]});var Vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-layout",{attrs:{"pa-4":"","justify-end":""}},[a("v-flex",[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e.items.length>0?[e._v("\n                             "+e._s(e.items[0].project_name)+"\n                        ")]:e._e()],2)]),a("v-flex",{attrs:{lg6:"",shrink:""}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:e.endpoint+"/"+e.$route.params.id},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=(t.error,t.loading);return a("div",{attrs:{ab:e.$set(e.dataG,s.results)}},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{headers:e.headers,items:e.items?e.items:[],loading:r,search:e.search},scopedSlots:e._u([{key:"item.status",fn:function(t){var s=t.item;return[s.status>0?[a("div",{staticStyle:{color:"green"}},[a("span",{staticClass:"body-2"},[e._v(e._s(e._f("currency")(s.status,"")))]),a("v-icon",{staticClass:"ml-1",staticStyle:{transform:"rotate(-90deg)"},attrs:{color:"green",size:"20px"}},[e._v(" play_arrow ")])],1)]:[a("div",{staticStyle:{color:"red"}},[a("span",{staticClass:"body-2"},[e._v(e._s(e._f("currency")(s.status,"")))]),a("v-icon",{staticClass:"ml-1",staticStyle:{transform:"rotate(90deg)"},attrs:{color:"red",size:"20px"}},[e._v(" play_arrow ")])],1)]]}},{key:"item.product_name",fn:function(t){var s=t.item;return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"inventory",params:{id:s.product_id}},append:""}},[a("div",[e._v(" "+e._s(s.product_name))])])]}},{key:"item.jobcard_quantity",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("currency")(a.jobcard_quantity,""))+"\n                            ")]}},{key:"item.avg_rate",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("currency")(a.avg_rate,""))+"\n                            ")]}},{key:"item.stock",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("currency")(a.stock,""))+"\n                            ")]}},{key:"item.cost",fn:function(t){var s=t.item;return[s.cost?a("div",{staticStyle:{background:"#dfecf3",color:"#356179",padding:"3px 6px 3px 6px","border-radius":"6px",display:"inline"}},[e._v("\n                                    "+e._s(e._f("currency")(s.cost,""))+"\n                                ")]):e._e()]}}],null,!0)})],1)}}])})],1)],1)},Or=[],Ar={extends:ee,name:"projectWise",components:{DataList:ae,DataModel:se},data(){return{endpoint:"inventory/projectWise",search:"",dataG:[],dialog:!1,dialog_key:0,dl_key:55,dialog_loading:!1,items:[],options:{},headers:[{text:"Product Name",value:"product_name"},{text:"Stock",value:"stock"},{text:"Jobcard Requirement",value:"jobcard_quantity"},{text:"Status",value:"status"}],editedIndex:-1,editedItem:{godown_id:0,name:"",address:"",client_name:"",client_id:null},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0},snackbar:{visible:!1,state:!1,message:""}}},computed:{},watch:{dialog(e){e||this.dialogClose()}},async mounted(){},methods:{listSuccess(e){this.items=e.data.results},listError(e){this.items=[]}}},qr=Ar,Nr=(a("48e4"),Object(c["a"])(qr,Vr,Or,!1,null,null,null)),Lr=Nr.exports;m()(Nr,{VDataTable:le["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VTextField:ve["a"]});var Mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},Hr=[],Ur={},Br=Ur,Rr=Object(c["a"])(Br,Mr,Hr,!1,null,null,null),Wr=Rr.exports,Fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"","pa-5":""}},[a("v-snackbar",{attrs:{timeout:2e3,color:e.snackbar.state?"success":"error"},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" \n        "+e._s(e.snackbar.message)+" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("Close")])],1),a("v-flex",{staticClass:"white elevation-2",staticStyle:{"border-radius":"25px"},attrs:{xs12:"","py-5":""}},[a("v-dialog",{key:e.dialog_key,attrs:{"max-width":e.dynamicWidth},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[a("v-layout",{attrs:{row:"",wrap:e.$vuetify.breakpoint.smAndDown,"justify-end":e.$vuetify.breakpoint.lgAndUp,"justify-center":e.$vuetify.breakpoint.smAndDown,"pr-5":""}},[a("v-flex",{attrs:{xs6:e.$vuetify.breakpoint.smAndDown,"px-5":""}},[a("h1",{staticClass:"display-1",staticStyle:{opacity:".6"}},[e._v(" "+e._s(e.firstCharUpperCase(e.$route.name))+" ")])]),a("v-flex",{attrs:{xs12:"",lg5:"",shrink:"","mb-5":e.$vuetify.breakpoint.smAndDown}},[a("v-text-field",{staticStyle:{height:"14px !important",transform:"scale(0.75)"},attrs:{"single-line":"",rounded:"",label:"Search",outlined:"","prepend-inner-icon":"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs6:"",lg2:"",shrink:"","mt-5":e.$vuetify.breakpoint.smAndDown}},[a("v-btn",{staticClass:"hover-btn mb-2",staticStyle:{"background-image":"linear-gradient(to right, #e53935 0%, #e35d5b 51%, #e53935 100%)"},attrs:{medium:"",dark:"",color:"black",rounded:""},on:{click:function(t){t.stopPropagation(),++e.dialog_key,e.dialog=!0,e.userMethod=e.methodsEnums.POST}}},[e._v("New Item")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[e.userMethod==e.methodsEnums.POST||e.userMethod==e.methodsEnums.PATCH?a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Name","data-vv-name":"name","error-messages":e.errors.collect("name")},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("data-list",{attrs:{endpoint:"clients"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data,r=t.error,i=t.loading;return a("div",{},[a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Clients",error:r,"error-messages":r?r.statusText+". Try Reloading the page":"",loading:!r&&i?i:"",items:i||r?[]:e.generateItems(s.results),"data-vv-name":"client_names"},model:{value:e.editedItem.client_id,callback:function(t){e.$set(e.editedItem,"client_id",t)},expression:"editedItem.client_id"}})],1)}}],null,!1,1961781317)})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:128",expression:"'required|min:6|max:128'"}],attrs:{label:"Site Address","data-vv-name":"site_address","error-messages":e.errors.collect("site_address")},model:{value:e.editedItem.site_address,callback:function(t){e.$set(e.editedItem,"site_address",t)},expression:"editedItem.site_address"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3|max:64",expression:"'required|min:3|max:64'"}],attrs:{label:"Godown Name","data-vv-name":"godown name","error-messages":e.errors.collect("godown_name")},model:{value:e.editedItem.godown_name,callback:function(t){e.$set(e.editedItem,"godown_name",t)},expression:"editedItem.godown_name"}})],1)],1):e.userMethod==e.methodsEnums.DELETE?a("v-layout",{staticStyle:{background:"rgba(0,0,0,.15)","border-radius":"12px"},attrs:{wrap:""}},e._l(Object.values(e.editedItem),function(t,s){return a("v-flex",{staticClass:"pa-2"},[e._v(" "+e._s(t)+" ")])}),1):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("data-model",{attrs:{endpoint:"projects"},on:{success:function(t){return e.postSuccess()},error:function(t){return e.postError()}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.remove,r=(t.data,t.loading),i=t.create,n=t.update;t.error;return a("div",{},[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.dialogClose}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",loading:r,text:""},on:{click:function(t){return e.dialogSave({functions:{create:i,remove:s,update:n}})}}},[e._v(" "+e._s(e.methodToStringPresent(e.userMethod))+" ")])],1)}}])})],1)],1)],1),a("data-list",{key:e.dl_key,attrs:{endpoint:"projects"},on:{success:e.listSuccess,error:e.listError},scopedSlots:e._u([{key:"default",fn:function(t){t.data,t.error;var s=t.loading;return a("div",{},[a("v-data-table",{staticClass:"elevation-0",style:{borderRadius:"15px !important"},attrs:{"sort-by":e.table.sortBy,"sort-desc":e.table.sortDesc,loading:s,headers:e.headers,items:e.items,options:e.options,search:e.search},on:{"update:sortBy":function(t){return e.$set(e.table,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.table,"sortBy",t)},"update:sortDesc":function(t){return e.$set(e.table,"sortDesc",t)},"update:sort-desc":function(t){return e.$set(e.table,"sortDesc",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.client_name",fn:function(t){return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"client",params:{id:t.item.client_id}},append:""}},[a("div",[e._v(" "+e._s(t.item.client_name))])])]}},{key:"item.project_id",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e._f("project")(a.project_id))+"\n                            ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.actionEditItem(s)}}},[e._v("\n                                    edit\n                                ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.actionDeleteItem(s)}}},[e._v("\n                                   delete\n                                ")])]}},{key:"item.dashboard",fn:function(t){var s=t.item;return[a("router-link",{staticClass:"clickable",attrs:{tag:"div",to:{name:"projectWise",params:{id:s.project_id}}}},[a("div",[e._v(" Open ")])])]}}],null,!0)})],1)}}])})],1)],1)},Gr=[];const zr={GET:0,POST:1,PATCH:2,DELETE:3};Object.freeze(zr);var Jr={extends:ee,components:{DataList:ae,DataModel:se},data(){return{search:"",dialog:!1,dialog_key:0,dl_key:0,dialog_loading:!1,schema:{project_id:{text:"Project ID","v-validate":"'integer'",value:"project_id",edit_value:"'integer'",default:0,ignore:!0},name:{text:"Project Name","v-validate":"'required|min:3|max:64'",value:"name",edit_value:"'min:3|max:64'",default:0},site_address:{text:"Project Address","v-validate":"'required|min:3|max:128'",value:"site_address",edit_value:"'min:3|max:128'",default:0},client_name:{text:"Client Name",type:"select","v-validate":"'required'",value:"client_name",default:0},dashboard:{text:"Dashboard",type:"select","v-validate":"'required'",value:"dashboard",default:0}},items:[],options:{},headers:[],editedIndex:-1,editedItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0,godown_name:""},defaultItem:{project_id:0,name:"",site_address:"",client_name:"",client_id:0},snackbar:{visible:!1,state:!1,message:""},methodsEnums:zr,userMethod:0,table:{sortBy:"",sortDesc:!1}}},computed:{dynamicWidth(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"80%";case"lg":return"50%";case"xl":return"50%"}},formTitle(){switch(this.userMethod){case this.methodsEnums.POST:return"New Item";case this.methodsEnums.PATCH:return"Update Item";case this.methodsEnums.DELETE:return"Delete Item";default:return"Invalid State"}}},watch:{dialog(e){e||this.dialogClose()}},async mounted(){this.headers=this.generateHeaders(this.schema)},methods:{async getItems(e,t){return await axios({method:"GET",baseURL:this.$config.baseUrl,url:e,data:t})},generateInstance(){},listSuccess(e){this.items=e.data.results},listError(e){this.items=[]},generateItems(e){let t=[];return e.forEach((e,a)=>{t.push({text:e.name,value:e.client_id})}),t},keyHack(){return++this.dialog_key},generateIterable(e){let t=[];for(let a in e){let s=e[a];s.ignore||t.push(s)}return t},generateHeaders(e){let t=[];for(var a in e){let{text:s,value:r}=e[a];t.push({text:s,value:r})}return t.push({text:"Actions",value:"actions"}),t},actionEditItem(e){this.userMethod=this.methodsEnums.PATCH,this.editedItem=Object.assign({},e),this.dialog=!0},actionDeleteItem(e){this.userMethod=this.methodsEnums.DELETE,this.editedItem=Object.assign({},e),this.dialog=!0},dialogClose(){this.dialog=!1,setTimeout(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},300)},dialogSave(e){switch(console.log(e.functions),this.userMethod){case this.methodsEnums.POST:this.$validator.validateAll().then(t=>{e.functions.create(this.editedItem)});break;case this.methodsEnums.PATCH:this.$validator.validateAll().then(t=>{e.functions.update(this.editedItem)});break;case this.methodsEnums.DELETE:e.functions.remove({project_id:this.editedItem.project_id});break}},postSuccess(){this.snackbar.message=`Successfully ${this.methodToString(this.userMethod)} a project`,this.snackbar.state=!0,this.snackbar.visible=!0,++this.dl_key,this.dialogClose()},postError(){this.snackbar.state=!1,this.snackbar.visible=!0,this.snackbar.message="Something Went Wrong. Try again later"},methodToString(e){switch(e){case this.methodsEnums.POST:return"added";case this.methodsEnums.PATCH:return"updated";case this.methodsEnums.DELETE:return"deleted"}},methodToStringPresent(e){switch(e){case this.methodsEnums.POST:return"add";case this.methodsEnums.PATCH:return"update";case this.methodsEnums.DELETE:return"delete"}}}},Yr=Jr,Qr=(a("d448"),Object(c["a"])(Yr,Fr,Gr,!1,null,null,null)),Kr=Qr.exports;m()(Qr,{VBtn:h["a"],VCard:oe["a"],VCardActions:de["a"],VCardText:de["b"],VCardTitle:de["c"],VContainer:F["a"],VDataTable:le["a"],VDialog:ce["a"],VFlex:p["a"],VIcon:f["a"],VLayout:g["a"],VSelect:ue["a"],VSnackbar:me["a"],VSpacer:C["a"],VTextField:ve["a"],VTextarea:ye["a"]}),s["a"].use(L["a"]);var Zr=new L["a"]({mode:"history",base:"/",routes:[{path:"/home",name:"home",component:K},{path:"/",name:"login",component:Ia},{path:"/clients",name:"clients",component:pe},{path:"/users",name:"users",component:Ma},{path:"/clients/:id",name:"client",component:Ks},{path:"/godowns",name:"godown",component:Ee},{path:"/projects",name:"projects",component:Qe},{path:"/projectWiseDash",name:"Project Wise Dash",component:Kr},{path:"/projects/:id",name:"project",component:vt},{path:"/persons",name:"persons",component:It},{path:"/Jobcards",name:"jobcards",component:Re},{path:"/jobcards/:id",name:"jobcard",component:ur},{path:"/products",name:"products",component:_t},{path:"/inventory",name:"inventories",component:Ot},{path:"/inventory/:id",name:"inventory",component:gr},{path:"/vendors",name:"vendors",component:Ut},{path:"/purchase-orders",name:"PurchaseOrder",component:Jt},{path:"/purchase-orders/:id",name:"po",component:Cr},{path:"/stock-transfer",name:"StockTransfer",component:va},{path:"/about",name:"about",component:()=>a.e("about").then(a.bind(null,"f820"))},{path:"/projectWise/:id",name:"projectWise",component:Lr},{path:"/productWise",name:"productWise",component:Dr},{path:"/jobcardWise",name:"jobcardWise",component:Wr}]}),Xr=a("2f62");s["a"].use(Xr["a"]);var ei=new Xr["a"].Store({state:{},mutations:{},actions:{}}),ti=a("7bb1");s["a"].prototype.$config={baseUrl:"http://34.83.223.211/api/v1/"};var ai=a("5a0c"),si=a.n(ai),ri=a("9dcd"),ii=a.n(ri),ni=a("a7c6"),oi=a.n(ni),di=a("f309");s["a"].use(di["a"]);var li=new di["a"]({icons:{iconfont:"mdi"}});s["a"].use(ti["a"]),s["a"].prototype.$dayjs=si.a,s["a"].prototype.$Big=ii.a,window.axios=ls.a,ls.a.defaults.withCredentials=!0,s["a"].use(oi.a),s["a"].config.productionTip=!1,s["a"].filter("formatDate",function(e){return e?si()(e).format("DD/MM/YYYY"):""}),Zr.beforeEach((e,t,a)=>{a()}),Zr.beforeResolve((e,t,a)=>{a()});let ci={client(e){return`CLIENT-${e}`},project(e){return`PROJ-${e}`},person(e){return`PRSN-${e}`},jobcard(e){return`JC-${e}`},product(e){return`PRDCT-${e}`},inventory(e){return`INV-${e}`},vendor(e){return`VDR-${e}`},po(e){return`PO-${e}`},stock(e){return`STK-${e}`},user(e){return`USER-${e}`},percentage(e){return`${e} %`}};Object.keys(ci).forEach((e,t)=>{ci[e]&&s["a"].filter(e,ci[e])});new s["a"]({router:Zr,store:ei,data:{$loggedIn:!1},vuetify:li,render:e=>e(N)}).$mount("#app")},"5b62":function(e,t,a){e.exports=a.p+"img/logo.b8ee50b7.png"},6118:function(e,t,a){},"653e":function(e,t,a){"use strict";var s=a("4600"),r=a.n(s);r.a},"66c0":function(e,t,a){"use strict";var s=a("c904"),r=a.n(s);r.a},"67d7":function(e,t,a){"use strict";var s=a("c6b1"),r=a.n(s);r.a},"731b":function(e,t,a){},"7dc6":function(e,t,a){},"7ee0":function(e,t,a){"use strict";var s=a("8427"),r=a.n(s);r.a},"824f":function(e,t,a){},8427:function(e,t,a){},8702:function(e,t,a){"use strict";var s=a("0fb5"),r=a.n(s);r.a},"9b19":function(e,t,a){e.exports=a.p+"img/logo.63a7d78d.svg"},a46c:function(e,t,a){"use strict";var s=a("b0de"),r=a.n(s);r.a},aca8:function(e,t,a){},ad81:function(e,t,a){},b0de:function(e,t,a){},b2f4:function(e,t,a){"use strict";var s=a("ca88"),r=a.n(s);r.a},b6ca:function(e,t,a){"use strict";var s=a("7dc6"),r=a.n(s);r.a},bb52:function(e,t,a){"use strict";var s=a("5636"),r=a.n(s);r.a},bb8f:function(e,t,a){"use strict";var s=a("ad81"),r=a.n(s);r.a},c339:function(e,t,a){},c6b1:function(e,t,a){},c904:function(e,t,a){},ca88:function(e,t,a){},d448:function(e,t,a){"use strict";var s=a("6118"),r=a.n(s);r.a},da94:function(e,t,a){},e089:function(e,t,a){},e4fb:function(e,t,a){"use strict";var s=a("e089"),r=a.n(s);r.a}});
//# sourceMappingURL=app.f2042c45.js.map